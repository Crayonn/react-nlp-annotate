{"version":3,"sources":["components/Theme/index.js","components/DemoSite/Editor.js","string-to-sequence.js","components/Document/index.js","components/LabelButton/index.js","components/LabelSelector/index.js","merge-sequence.js","colors.js","components/SequenceAnnotator/index.js","components/DocumentLabeler/index.js","components/EditableDocument/index.js","components/Transcriber/index.js","components/Container/index.js","components/NLPAnnotator/index.js","components/DemoSite/ErrorBoundaryDialog.js","components/DemoSite/index.js","components/DatasetViewer/index.js","index.js"],"names":["useStyles","makeStyles","container","fontFamily","theme","createMuiTheme","typography","overrides","MuiButton","root","textTransform","editBar","padding","borderBottom","backgroundColor","display","alignItems","& .button","margin","select","width","fontSize","contentArea","specificationArea","loadSavedInput","JSON","parse","window","localStorage","getItem","e","examples","SimpleLabelSequence","type","document","labels","id","displayName","SimpleLabelDocument","Custom","Editor","_ref","initialAnnotatorProps","onOpenAnnotator","lastOutput","c","_useState","useState","_useState2","Object","slicedToArray","currentError","changeCurrentError","_useState3","_useState4","selectedExample","changeSelectedExample","_useState5","_useState6","outputDialogOpen","changeOutputOpen","_useState7","stringify","_useState8","currentJSONValue","changeCurrentJSONValue","react_default","a","createElement","className","style","flexGrow","react_select_esm","value","label","options","keys","map","s","onChange","selectedOption","Button_default","disabled","onClick","variant","Boolean","border","lib_default","language","code","setItem","toString","height","default_highlight","Dialog_default","fullScreen","open","DialogTitle_default","DialogContent_default","minWidth","DialogActions_default","stringToSequence","doc","m","sepRe","indices","exec","push","index","length","concat","filter","_","i","text","slice","Document","sequence","_ref$onHighlightedCha","onHighlightedChanged","_ref$onSequenceChange","onSequenceChange","nothingHighlighted","_ref$colorLabelMap","colorLabelMap","mouseDown","changeMouseDown","_useState4$","firstSelected","lastSelected","changeHighlightedRangeState","changeHighlightedRange","_ref2","_ref3","first","last","highlightedItems","Math","min","max","onMouseDown","onMouseUp","seq","Fragment","onMouseMove","color","paddingLeft","paddingRight","borderRadius","userSelect","includes","marginTop","marginBottom","paddingTop","paddingBottom","key","Tooltip_default","title","placement","flatMap","cursor","alignSelf","justifyContent","marginLeft","&:hover","opacity","&.small","fontWeight","Label","props","parent","description","small","hasChildren","hotkey","deletable","classes","classnames","FolderOpen_default","marginRight","tooltip","whiteSpace","LabelSelector","onSelectLabel","parents","changeParents","currentParent","undefined","hotkeyLabelMap","r","labelHotkeyMap","letters","toLowerCase","split","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","letter","err","return","useLayoutEffect","eventFunc","labelId","some","l2","findRouteFromParents","find","l","addEventListener","removeEventListener","flexWrap","LabelButton","p","objectSpread","assign","indexOf","mergeSequence","newSeq","current","reduce","acc","colors","SequenceAnnotator","changeHighlightedItems","initialSequence","entity","changeSequence","useMemo","buildText","newSequence","itemIndex","item","borderTop","DocumentLabeler","initialLabels","initialLabel","selectedLabels","changeSelectedLabels","multipleLabels","newSelectedLabels","spellChecker","Spelling","enDictionary","components","createOption","random","colourStyles","control","styles","option","data","isDisabled","isFocused","isSelected","chroma","yellow","alpha","css","contrast","darken","multiValue","multiValueLabel","multiValueRemove","_ref4",":hover","EditableDocument","_ref5","_ref5$initialText","initialText","_ref5$phraseBank","phraseBank","_ref5$validator","validator","inputValue","changeInputValue","green","changeValue","validationErrors","changeValidationErrors","loadOptions","_ref7","asyncToGenerator","regenerator_default","mark","_callee","scRes","possiblePhrases","wrap","_context","prev","lookup","found","abrupt","startsWith","suggestions","_ref8","word","stop","_x","apply","this","arguments","AsyncCreatable_default","isClearable","isMulti","v","result","join","onInputChange","onKeyDown","_ref6","toConsumableArray","placeholder","red","Transcriber","initialTranscriptionText","audio","phraseBankParam","NLP_ANNOTATOR_AUTOPLAY","autoPlayStatus","changeAutoPlayStatus","changePhraseBank","useEffect","_loadPhraseBank","fullPhraseBank","url","saveName","urlPhrases","Array","isArray","every","endsWith","fetch","then","res","t0","trim","sent","t1","finish","loadPhraseBank","textAlign","autoPlay","loop","controlsList","controls","src","checked","Container","children","finishButton","&&","NLPAnnotator","output","changeOutput","onFinish","newOutput","msg","ErrorBoundaryDialog","state","hasError","info","setState","componentStack","onClose","Component","header","button","content","warning","ReactDOM","render","MuiThemeProvider_default","location","search","samples","changeSamples","sampleIndex","changeSampleIndex","_useState6$","loadUrl","_useState6$$outputNam","outputName","changeMetaInfo","_loadData","queryString","load_url","output_name","axios","get","loadData","method","name","defaultValue","download","answer","_samples$sampleIndex","multiple","prop","console","log","set","cloneDeep","annotatorOpen","changeAnnotatorOpen","load","Base64","decode","error","getInitialAnnotatorProps","annotatorProps","changeAnnotatorProps","changeLastOutput","ErrorBoundaryDialog_ErrorBoundaryDialog","DemoSite_Editor","getElementById"],"mappings":"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","file":"static/js/main.1e88ea36.chunk.js","sourcesContent":["// @flow\n\nimport React from \"react\"\nimport { makeStyles } from \"@material-ui/styles\"\nimport createMuiTheme from \"@material-ui/core/styles/createMuiTheme\"\nimport MuiThemeProvider from \"@material-ui/core/styles/MuiThemeProvider\"\nimport \"./theme.css\"\n\nconst useStyles = makeStyles({\n  container: {\n    fontFamily: '\"Inter UI\", sans-serif'\n  }\n})\n\nconst theme = createMuiTheme({\n  typography: {\n    fontFamily: '\"Inter UI\", \"Roboto\", sans-serif'\n  },\n  overrides: {\n    MuiButton: {\n      root: {\n        textTransform: \"none\"\n      }\n    }\n  }\n})\n\nexport default ({ children }: any) => {\n  const classes = useStyles()\n  return (\n    <MuiThemeProvider theme={theme}>\n      <div className={classes.container}>{children}</div>\n    </MuiThemeProvider>\n  )\n}\n","// @flow\n\nimport React, { useState } from \"react\"\nimport Button from \"@material-ui/core/Button\"\nimport { makeStyles } from \"@material-ui/styles\"\nimport Select from \"react-select\"\nimport Code from \"react-syntax-highlighter\"\nimport Dialog from \"@material-ui/core/Dialog\"\nimport DialogTitle from \"@material-ui/core/DialogTitle\"\nimport DialogContent from \"@material-ui/core/DialogContent\"\nimport DialogActions from \"@material-ui/core/DialogActions\"\nimport MonacoEditor from \"react-monaco-editor\"\n\nconst useStyles = makeStyles({\n  editBar: {\n    padding: 10,\n    borderBottom: \"1px solid #ccc\",\n    backgroundColor: \"#f8f8f8\",\n    display: \"flex\",\n    alignItems: \"center\",\n    \"& .button\": { margin: 5 }\n  },\n  select: { width: 240, fontSize: 14 },\n  contentArea: {\n    padding: 10\n  },\n  specificationArea: {\n    padding: 10\n  }\n})\n\nconst loadSavedInput = () => {\n  try {\n    return JSON.parse(window.localStorage.getItem(\"nlpCustomInput\") || \"{}\")\n  } catch (e) {\n    return {}\n  }\n}\n\nexport const examples = {\n  SimpleLabelSequence: () => ({\n    type: \"label-sequence\",\n    document: `Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis pharetra ipsum tristique ligula venenatis placerat. Interdum et malesuada fames ac ante ipsum primis in faucibus. Fusce mollis velit nec tellus sollicitudin aliquam. In velit erat, iaculis id consectetur et, tincidunt sit amet mauris. Quisque ultricies, purus eleifend congue malesuada, ipsum erat molestie dolor, in pellentesque lacus purus vel nisl. Interdum et malesuada fames ac ante ipsum primis in faucibus. Nulla sed vestibulum magna. Quisque ut lorem imperdiet, aliquam velit nec, dictum felis.`,\n    labels: [\n      {\n        id: \"noun\",\n        displayName: \"Noun\"\n      },\n      {\n        id: \"proper-noun\",\n        displayName: \"Proper Noun\"\n      }\n    ]\n  }),\n  SimpleLabelDocument: () => ({\n    type: \"label-document\",\n    document: `Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis pharetra ipsum tristique ligula venenatis placerat. Interdum et malesuada fames ac ante ipsum primis in faucibus. Fusce mollis velit nec tellus sollicitudin aliquam. In velit erat, iaculis id consectetur et, tincidunt sit amet mauris. Quisque ultricies, purus eleifend congue malesuada, ipsum erat molestie dolor, in pellentesque lacus purus vel nisl. Interdum et malesuada fames ac ante ipsum primis in faucibus. Nulla sed vestibulum magna. Quisque ut lorem imperdiet, aliquam velit nec, dictum felis.`,\n    labels: [\n      {\n        id: \"latin\",\n        displayName: \"Latin\"\n      },\n      {\n        id: \"english\",\n        displayName: \"English\"\n      },\n      {\n        id: \"german\",\n        displayName: \"German\"\n      }\n    ]\n  }),\n  Custom: () => loadSavedInput()\n}\n\nconst Editor = ({\n  initialAnnotatorProps,\n  onOpenAnnotator,\n  lastOutput\n}: any) => {\n  const c = useStyles()\n  const [currentError, changeCurrentError] = useState()\n  const [selectedExample, changeSelectedExample] = useState(\n    window.localStorage.getItem(\"nlpCustomInput\")\n      ? \"Custom\"\n      : \"SimpleLabelSequence\"\n  )\n  const [outputDialogOpen, changeOutputOpen] = useState(lastOutput)\n  const [currentJSONValue, changeCurrentJSONValue] = useState(\n    initialAnnotatorProps\n      ? JSON.stringify(initialAnnotatorProps, null, \"  \")\n      : JSON.stringify(examples[selectedExample](), null, \"  \")\n  )\n  return (\n    <div>\n      <div className={c.editBar}>\n        <h3>React NLP Annotate</h3>\n        <div style={{ flexGrow: 1 }} />\n        <div>\n          <div style={{ display: \"inline-flex\" }}>\n            <Select\n              className={c.select}\n              value={{ label: selectedExample, value: selectedExample }}\n              options={Object.keys(examples).map(s => ({\n                label: s,\n                value: s\n              }))}\n              onChange={selectedOption => {\n                changeSelectedExample(selectedOption.value)\n\n                changeCurrentJSONValue(\n                  JSON.stringify(\n                    selectedOption.value === \"Custom\"\n                      ? loadSavedInput()\n                      : examples[selectedOption.value](),\n                    null,\n                    \"  \"\n                  )\n                )\n              }}\n            />\n          </div>\n          <Button\n            className=\"button\"\n            disabled={!lastOutput}\n            onClick={() => changeOutputOpen(true)}\n          >\n            View Output\n          </Button>\n          <Button\n            className=\"button\"\n            variant=\"outlined\"\n            disabled={Boolean(currentError)}\n            onClick={() =>\n              onOpenAnnotator(\n                selectedExample === \"Custom\"\n                  ? JSON.parse(currentJSONValue)\n                  : examples[selectedExample]()\n              )\n            }\n          >\n            Open Annotator\n          </Button>\n        </div>\n      </div>\n      <div\n        className={c.contentArea}\n        style={\n          currentError\n            ? { border: \"2px solid #f00\" }\n            : { border: \"2px solid #fff\" }\n        }\n      >\n        <div>\n          <MonacoEditor\n            value={currentJSONValue}\n            language=\"javascript\"\n            onChange={code => {\n              try {\n                window.localStorage.setItem(\n                  \"nlpCustomInput\",\n                  JSON.stringify(JSON.parse(code))\n                )\n                changeCurrentError(null)\n              } catch (e) {\n                changeCurrentError(e.toString())\n              }\n              changeCurrentJSONValue(code)\n            }}\n            width=\"100%\"\n            height=\"550px\"\n          />\n        </div>\n      </div>\n      <div className={c.specificationArea}>\n        <h2>React NLP Annotate Format</h2>\n        <Code language=\"javascript\">{`\n// There are several types of annotators you can use...\n\nexport type LabelDocumentProps = {\n  type: \"label-document\",\n  labels: Array<Label>,\n  multipleLabels?: boolean,\n  initialLabels?: Array<string>,\n  document: string,\n  onChange: (Array<string> | string | null) => any\n}\n\nexport type SequenceAnnotatorProps = {\n  type: \"label-sequence\",\n  labels: Array<Label>,\n  initialSequence?: Array<SequenceItem>,\n  document: string,\n  onChange: (sequence: Array<SequenceItem>) => any\n}\n\nexport type TranscriberProps = {\n  type: \"transcribe\",\n  audio: string,\n  phraseBank?: Array<string>,\n  validator?: string => Array<string>,\n  initialTranscriptionText?: string,\n  onChange: string => any\n}\n\nexport type NLPAnnotatorProps = {\n  ...\n    | $Exact<SequenceAnnotatorProps>\n    | $Exact<LabelDocumentProps>\n    | $Exact<TranscriberProps>,\n  onFinish?: string,\n  onChange?: string\n}\n`}</Code>\n      </div>\n      <Dialog fullScreen open={outputDialogOpen}>\n        <DialogTitle>React NLP Annotate Output</DialogTitle>\n        <DialogContent style={{ minWidth: 400 }}>\n          <MonacoEditor\n            value={JSON.stringify(lastOutput, null, \"  \")}\n            language=\"javascript\"\n            width=\"100%\"\n            height=\"550px\"\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => changeOutputOpen(false)}>Close</Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  )\n}\n\nexport default Editor\n","// @flow\n\nconst stringToSequence = (doc: string) => {\n  const sepRe = /[a-zA-Z]+/g\n  let m\n  let indices = [0]\n  do {\n    m = sepRe.exec(doc)\n    if (m) {\n      indices.push(m.index)\n      indices.push(m.index + m[0].length)\n    }\n  } while (m)\n  indices = indices.concat([doc.length])\n  return indices\n    .filter((_, i) => indices[i] !== indices[i + 1])\n    .map((_, i) => ({\n      text: doc.slice(indices[i], indices[i + 1])\n    }))\n    .filter(s => s.text.length > 0)\n}\n\nexport default stringToSequence\n","// @flow\n\nimport React, { useState } from \"react\"\nimport type { SequenceItem } from \"../../types\"\nimport { makeStyles } from \"@material-ui/styles\"\nimport stringToSequence from \"../../string-to-sequence.js\"\nimport Tooltip from \"@material-ui/core/Tooltip\"\n\nconst useStyles = makeStyles({})\n\ntype Props = {\n  sequence: Array<SequenceItem>,\n  canModifySequence?: boolean,\n  onSequenceChange?: (Array<SequenceItem>) => any,\n  onHighlightedChanged?: (Array<number>) => any,\n  nothingHighlighted?: boolean,\n  colorLabelMap?: Object\n}\n\nexport default function Document({\n  sequence,\n  onHighlightedChanged = () => null,\n  onSequenceChange = () => null,\n  nothingHighlighted,\n  colorLabelMap = {}\n}: Props) {\n  const [mouseDown, changeMouseDown] = useState()\n  const [[firstSelected, lastSelected], changeHighlightedRangeState] = useState(\n    [null, null]\n  )\n  const changeHighlightedRange = ([first, last]) => {\n    changeHighlightedRangeState([first, last])\n    const highlightedItems = []\n    for (let i = Math.min(first, last); i <= Math.max(first, last); i++)\n      highlightedItems.push(i)\n    onHighlightedChanged(highlightedItems)\n  }\n  let highlightedItems = []\n  if (!nothingHighlighted && firstSelected !== null && lastSelected !== null) {\n    for (\n      let i = Math.min(firstSelected, lastSelected);\n      i <= Math.max(firstSelected, lastSelected);\n      i++\n    )\n      highlightedItems.push(i)\n  }\n\n  return (\n    <div\n      onMouseDown={() => changeMouseDown(true)}\n      onMouseUp={() => changeMouseDown(false)}\n    >\n      {sequence.map((seq, i) => (\n        <>\n          <span\n            onMouseDown={() => {\n              if (seq.label) return\n              changeHighlightedRange([i, i])\n            }}\n            onMouseMove={() => {\n              if (seq.label) return\n              if (mouseDown && i !== lastSelected) {\n                changeHighlightedRange([\n                  firstSelected === null ? i : firstSelected,\n                  i\n                ])\n              }\n            }}\n            style={\n              seq.label\n                ? {\n                    display: \"inline-flex\",\n                    backgroundColor:\n                      seq.color || colorLabelMap[seq.label] || \"#333\",\n                    color: \"#fff\",\n                    padding: 4,\n                    margin: 4,\n                    paddingLeft: 10,\n                    paddingRight: 10,\n                    borderRadius: 4,\n                    userSelect: \"none\"\n                  }\n                : {\n                    display: \"inline-flex\",\n                    backgroundColor:\n                      seq.text !== \" \" && highlightedItems.includes(i)\n                        ? \"#ccc\"\n                        : \"inherit\",\n                    color: \"#333\",\n                    marginTop: 4,\n                    marginBottom: 4,\n                    paddingTop: 4,\n                    paddingBottom: 4,\n                    paddingLeft: 2,\n                    paddingRight: 2,\n                    userSelect: \"none\"\n                  }\n            }\n            key={i}\n          >\n            {seq.label ? (\n              <Tooltip title={seq.label} placement=\"bottom\">\n                <div>{seq.text}</div>\n              </Tooltip>\n            ) : (\n              <div>{seq.text}</div>\n            )}\n            {seq.label && (\n              <div\n                onClick={() => {\n                  onSequenceChange(\n                    sequence\n                      .flatMap(s => (s !== seq ? s : stringToSequence(s.text)))\n                      .filter(s => s.text.length > 0)\n                  )\n                }}\n                style={{\n                  display: \"inline-flex\",\n                  cursor: \"pointer\",\n                  alignSelf: \"center\",\n                  fontSize: 11,\n                  width: 18,\n                  height: 18,\n                  alignItems: \"center\",\n                  justifyContent: \"center\",\n                  marginLeft: 4,\n                  borderRadius: 9,\n                  color: \"#fff\",\n                  backgroundColor: \"rgba(0,0,0,0.2)\"\n                }}\n              >\n                <span>{\"\\u2716\"}</span>\n              </div>\n            )}\n          </span>\n        </>\n      ))}\n    </div>\n  )\n}\n","// @flow\n\nimport React from \"react\"\nimport type { Label as LabelType } from \"../../types.js\"\nimport FolderOpenIcon from \"@material-ui/icons/FolderOpen\"\nimport classnames from \"classnames\"\nimport makeStyles from \"@material-ui/styles/makeStyles\"\n\nconst useStyles = makeStyles({\n  label: {\n    display: \"inline-flex\",\n    cursor: \"pointer\",\n    padding: 8,\n    paddingLeft: 12,\n    paddingRight: 12,\n    margin: 4,\n    borderRadius: 4,\n    fontSize: 18,\n    color: \"#fff\",\n    alignItems: \"center\",\n    \"&:hover\": {\n      opacity: 0.6\n    },\n    \"&.small\": {\n      fontSize: 12,\n      fontWeight: \"bold\"\n    }\n  }\n})\n\nconst Label = (props: {\n  ...$Exact<LabelType>,\n  hasChildren?: boolean,\n  small?: boolean,\n  hotkey?: string,\n  deletable?: boolean,\n  onClick: string => any\n}) => {\n  const {\n    parent,\n    color,\n    displayName,\n    description,\n    id,\n    small,\n    hasChildren,\n    hotkey,\n    deletable\n  } = props\n  const classes = useStyles()\n\n  return (\n    <div\n      onClick={() => props.onClick(id)}\n      className={classnames(classes.label, small && \"small\")}\n      style={{ backgroundColor: color }}\n    >\n      {hasChildren && (\n        <FolderOpenIcon\n          style={{\n            width: small ? 12 : 20,\n            height: small ? 12 : 20,\n            marginRight: small ? 3 : 6\n          }}\n        />\n      )}\n      <div>{displayName || id}</div>\n      {hotkey && <div style={{ paddingLeft: 4 }}>({hotkey})</div>}\n      {deletable && (\n        <div\n          style={{\n            display: \"inline-flex\",\n            cursor: \"pointer\",\n            alignSelf: \"center\",\n            fontSize: 11,\n            width: 18,\n            height: 18,\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            marginLeft: 4,\n            borderRadius: 9,\n            color: \"#fff\",\n            backgroundColor: \"rgba(0,0,0,0.2)\"\n          }}\n        >\n          <span>{\"\\u2716\"}</span>\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default Label\n","// @flow\n\nimport React, { useState, useLayoutEffect, useEffect } from \"react\"\nimport { makeStyles } from \"@material-ui/styles\"\nimport type { Label as LabelType } from \"../../types.js\"\nimport LabelButton from \"../LabelButton\"\nimport Tooltip from \"@material-ui/core/Tooltip\"\n\nconst useStyles = makeStyles({\n  tooltip: {\n    whiteSpace: \"pre-wrap\"\n  }\n})\n\nconst findRouteFromParents = (labelId, labels) => {\n  if (!labelId) return []\n  const label = labels.find(l => (l.id || \"root\") === labelId) || {}\n  if (label) {\n    return findRouteFromParents(label.parent, labels).concat([labelId])\n  }\n  return [labelId]\n}\n\nexport default ({\n  labels,\n  onSelectLabel\n}: {\n  labels: Array<LabelType>,\n  onSelectLabel: string => any\n}) => {\n  const [parents, changeParents] = useState([])\n  const currentParent =\n    parents.length > 0 ? parents[parents.length - 1] : undefined\n\n  const hotkeyLabelMap = { r: \"root\" }\n  const labelHotkeyMap = { root: \"r\" }\n  for (let i = 0; i < labels.length; i++) {\n    const label = labels[i]\n    const letters = (label.displayName || label.id).toLowerCase().split(\"\")\n    for (const letter of letters) {\n      if (!hotkeyLabelMap[letter]) {\n        hotkeyLabelMap[letter] = label.id\n        labelHotkeyMap[label.id] = letter\n        break\n      }\n    }\n  }\n\n  useLayoutEffect(() => {\n    const eventFunc = e => {\n      if (hotkeyLabelMap[e.key]) {\n        const labelId = hotkeyLabelMap[e.key]\n        if (!labels.some(l2 => l2.parent === labelId)) {\n          if (labelId === \"root\") {\n            changeParents([])\n          } else {\n            onSelectLabel(labelId)\n          }\n        } else {\n          changeParents(findRouteFromParents(labelId, labels))\n        }\n      }\n    }\n\n    window.addEventListener(\"keydown\", eventFunc)\n    return () => {\n      window.removeEventListener(\"keydown\", eventFunc)\n    }\n  })\n\n  const c = useStyles()\n\n  return (\n    <div>\n      {labels.some(l => l.parent) && (\n        <div\n          style={{ alignItems: \"center\", display: \"flex\", flexWrap: \"wrap\" }}\n        >\n          <LabelButton\n            small\n            color={parents.length > 0 ? \"#333\" : \"#ccc\"}\n            displayName=\"Root (r)\"\n            id=\"\"\n            onClick={() => changeParents([])}\n          />\n          {parents\n            .map(p => labels.find(l => l.id === p))\n            .filter(Boolean)\n            .map(l => ({\n              ...l,\n              hasChildren: labels.some(l2 => l2.parent === l.id)\n            }))\n            .map((l, i) => (\n              <Tooltip\n                // open={helpOpen}\n                classes={{ tooltip: c.tooltip }}\n                key={i}\n                title={l.description || \"No Description\"}\n                placement=\"bottom\"\n              >\n                <LabelButton\n                  small\n                  {...l}\n                  hotkey={labelHotkeyMap[l.id]}\n                  onClick={() => {\n                    changeParents(parents.slice(0, parents.indexOf(l.id) + 1))\n                  }}\n                />\n              </Tooltip>\n            ))}\n        </div>\n      )}\n      <div style={{ display: \"flex\", alignItems: \"center\", flexWrap: \"wrap\" }}>\n        {labels\n          .filter(l => l.parent === currentParent)\n          .map(l => ({\n            ...l,\n            hasChildren: labels.some(l2 => l2.parent === l.id)\n          }))\n          .map((l, i) => (\n            <Tooltip\n              key={i}\n              classes={{ tooltip: c.tooltip }}\n              title={l.description || \"No Description\"}\n              placement=\"bottom\"\n            >\n              <div>\n                <LabelButton\n                  {...l}\n                  hotkey={labelHotkeyMap[l.id]}\n                  onClick={\n                    !l.hasChildren\n                      ? onSelectLabel\n                      : () => {\n                          changeParents(parents.concat([l.id]))\n                        }\n                  }\n                />\n              </div>\n            </Tooltip>\n          ))}\n      </div>\n    </div>\n  )\n}\n","// @flow\n\nconst mergeSequence = (\n  seq: Array<{ text: string, label?: string, color?: string }>\n) => {\n  const newSeq = []\n  let current = [seq[0]]\n  for (let i = 1; i < seq.length; i++) {\n    if (current[0].label === seq[i].label) {\n      current.push(seq[i])\n    } else {\n      newSeq.push({\n        label: current[0].label,\n        text: current.reduce((acc, c) => acc + c.text, \"\")\n      })\n      current = [seq[i]]\n    }\n  }\n  newSeq.push({\n    label: current[0].label,\n    text: current.reduce((acc, c) => acc + c.text, \"\")\n  })\n  return newSeq\n}\n\nexport default mergeSequence\n","// @flow\n\nimport * as colors from \"@material-ui/core/colors\"\n\nexport default Object.keys(colors)\n  .filter(c => c !== \"common\")\n  .map(c => colors[c][700])\n","// @flow\n\nimport React, { useState, useMemo } from \"react\"\n\nimport type { SequenceAnnotatorProps } from \"../../types\"\nimport Document from \"../Document\"\nimport LabelSelector from \"../LabelSelector\"\nimport stringToSequence from \"../../string-to-sequence.js\"\nimport mergeSequence from \"../../merge-sequence.js\"\nimport colors from \"../../colors\"\n\nexport default function SequenceAnnotator(props: SequenceAnnotatorProps) {\n  const [highlightedItems, changeHighlightedItems] = useState([])\n  const [sequence, changeSequence] = useState(\n    () =>\n      props.initialSequence.flatMap(entity =>\n        entity.label ? [entity] : stringToSequence(entity.text)\n      ) || stringToSequence(props.document)\n  )\n  const colorLabelMap = useMemo(\n    () =>\n      props.labels.reduce(\n        (acc, l, i) => ((acc[l.id] = colors[i % colors.length]), acc),\n        {}\n      ),\n    [props.labels]\n  )\n\n  return (\n    <div>\n      <div>\n        <LabelSelector\n          labels={props.labels}\n          onSelectLabel={(label: string) => {\n            const { color } = props.labels.find(({ id }) => label === id) || {}\n            let buildText = \"\"\n            const newSequence = []\n            for (let itemIndex = 0; itemIndex < sequence.length; itemIndex++) {\n              const item = sequence[itemIndex]\n              if (!highlightedItems.includes(itemIndex) || item.label) {\n                if (buildText.length > 0) {\n                  newSequence.push({\n                    text: buildText,\n                    color,\n                    label\n                  })\n                  buildText = \"\"\n                }\n                newSequence.push(item)\n              } else {\n                buildText += item.text\n              }\n            }\n            if (buildText.length > 0) {\n              newSequence.push({\n                text: buildText,\n                color,\n                label\n              })\n            }\n\n            changeSequence(newSequence)\n            props.onChange(mergeSequence(newSequence))\n            changeHighlightedItems([])\n          }}\n        />\n      </div>\n      <div style={{ borderTop: \"1px solid #ccc\", marginTop: 8, paddingTop: 5 }}>\n        <Document\n          colorLabelMap={colorLabelMap}\n          nothingHighlighted={highlightedItems.length === 0}\n          onHighlightedChanged={highlightedItems =>\n            changeHighlightedItems(highlightedItems)\n          }\n          onSequenceChange={sequence => {\n            changeSequence(sequence)\n            props.onChange(mergeSequence(sequence))\n          }}\n          sequence={sequence}\n        />\n      </div>\n    </div>\n  )\n}\n","// @flow\n\nimport React, { useState, useMemo } from \"react\"\n\nimport type { LabelDocumentProps } from \"../../types\"\nimport Document from \"../Document\"\nimport LabelSelector from \"../LabelSelector\"\nimport stringToSequence from \"../../string-to-sequence.js\"\nimport LabelButton from \"../LabelButton\"\n\nexport default function DocumentLabeler(props: LabelDocumentProps) {\n  const [selectedLabels, changeSelectedLabels] = useState(\n    props.initialLabels || (props.initialLabel ? [props.initialLabel] : [])\n  )\n  const sequence = useMemo(() => stringToSequence(props.document), [\n    props.document\n  ])\n  return (\n    <div>\n      <div>\n        <LabelSelector\n          labels={props.labels}\n          onSelectLabel={(labelId: string) => {\n            if (props.multipleLabels) {\n              changeSelectedLabels(selectedLabels.concat([labelId]))\n              props.onChange(selectedLabels.concat([labelId]))\n            } else {\n              props.onChange(labelId)\n              changeSelectedLabels([labelId])\n            }\n          }}\n        />\n      </div>\n      <div style={{ borderTop: \"1px solid #ccc\", marginTop: 8, paddingTop: 5 }}>\n        <div>\n          {selectedLabels.map(labelId => {\n            const label = props.labels.find(l => l.id === labelId)\n            if (!label) return\n            return (\n              <LabelButton\n                {...label}\n                small\n                deletable\n                onClick={(labelId: string) => {\n                  const newSelectedLabels = selectedLabels.filter(\n                    l => l !== labelId\n                  )\n                  changeSelectedLabels(newSelectedLabels)\n                  if (props.multipleLabels) {\n                    props.onChange(newSelectedLabels)\n                  } else {\n                    props.onChange(null)\n                  }\n                }}\n              />\n            )\n          })}\n        </div>\n        <Document nothingHighlighted sequence={sequence} />\n      </div>\n    </div>\n  )\n}\n","// @flow\n\nimport React, { useState } from \"react\"\nimport CreatableSelect from \"react-select/lib/AsyncCreatable\"\nimport Spelling from \"spelling\"\nimport enDictionary from \"spelling/dictionaries/en_US\"\nimport chroma from \"chroma-js\"\nimport { green, yellow, red } from \"@material-ui/core/colors\"\n\nconst spellChecker = new Spelling(enDictionary)\n\nconst components = {}\nconst createOption = (label, color) => ({\n  label,\n  value: label + Math.random().toString(),\n  color\n})\n\nconst colourStyles = {\n  control: styles => ({ ...styles, backgroundColor: \"white\" }),\n  option: (styles, { data, isDisabled, isFocused, isSelected }) => {\n    const color = chroma(data.color || yellow[700])\n    return {\n      ...styles,\n      backgroundColor: isDisabled\n        ? null\n        : isSelected\n        ? data.color\n        : isFocused\n        ? color.alpha(0.1).css()\n        : color.alpha(0.05).css(),\n      color: isDisabled\n        ? \"#ccc\"\n        : isSelected\n        ? chroma.contrast(color, \"white\") > 2\n          ? \"white\"\n          : \"black\"\n        : color\n            .darken()\n            .darken()\n            .css(),\n      cursor: isDisabled ? \"not-allowed\" : \"default\"\n    }\n  },\n  multiValue: (styles, { data }) => {\n    const color = chroma(data.color)\n    return {\n      ...styles,\n      backgroundColor: color.alpha(0.1).css()\n    }\n  },\n  multiValueLabel: (styles, { data }) => ({\n    ...styles,\n    color: chroma(data.color)\n      .darken()\n      .darken()\n      .css()\n  }),\n  multiValueRemove: (styles, { data }) => ({\n    ...styles,\n    color: chroma(data.color)\n      .darken()\n      .darken()\n      .css(),\n    \":hover\": {\n      backgroundColor: data.color,\n      color: \"white\"\n    }\n  })\n}\n\nexport default function EditableDocument({\n  initialText = \"\",\n  onChange,\n  phraseBank = [],\n  validator = () => []\n}: {\n  initialText?: string,\n  validator?: string => Array<string>,\n  onChange: string => any,\n  phraseBank?: Array<string>\n}) {\n  const [inputValue, changeInputValue] = useState()\n  const [value, changeValue] = useState(\n    initialText\n      ? [{ value: initialText, label: initialText, color: green[500] }]\n      : []\n  )\n  const [validationErrors, changeValidationErrors] = useState([])\n\n  const handleChange = v => {\n    changeValue(v)\n    const result = v.map(l => l.label).join(\" \")\n    try {\n      changeValidationErrors(validator(result))\n    } catch (e) {\n      changeValidationErrors([\"Error: Validator had error: \" + e.toString()])\n    }\n    onChange(result)\n  }\n  const handleInputChange = v => changeInputValue(v)\n  const handleKeyDown = ({ key }) => {\n    if (!inputValue) return\n    if (key === \"Enter\" || key === \"Tab\") {\n      changeValue([...value, createOption(inputValue + \" \", yellow[700])])\n      changeInputValue(\"\")\n    }\n  }\n\n  const loadOptions = async text => {\n    let bestOption\n    text = text.toLowerCase()\n    const scRes = spellChecker.lookup(text)\n    if (scRes.found || phraseBank.includes(text))\n      return [createOption(text, green[500])]\n\n    const possiblePhrases = phraseBank.filter(p => p.startsWith(text))\n    return [bestOption || createOption(text, yellow[700])]\n      .concat(\n        possiblePhrases\n          .filter(p => p !== text)\n          .map(p => createOption(p, green[500]))\n      )\n      .concat(\n        scRes.suggestions\n          .slice(0, 6)\n          .map(({ word }) => createOption(word, green[500]))\n      )\n  }\n\n  return (\n    <div style={{ fontSize: 18 }}>\n      <CreatableSelect\n        components={components}\n        inputValue={inputValue}\n        isClearable\n        isMulti\n        onChange={handleChange}\n        onInputChange={handleInputChange}\n        onKeyDown={handleKeyDown}\n        placeholder=\"Begin writing...\"\n        loadOptions={loadOptions}\n        value={value}\n        styles={colourStyles}\n      />\n      <div\n        style={{\n          fontSize: 14,\n          height: 100,\n          marginTop: 8,\n          borderRadius: 2,\n          padding: 8\n        }}\n      >\n        {validationErrors.map(v => (\n          <div\n            style={{\n              marginTop: 8,\n              color: v.toLowerCase().includes(\"error:\") ? red[800] : yellow[800]\n            }}\n          >\n            {v}\n          </div>\n        ))}\n      </div>\n    </div>\n  )\n}\n","// @flow\n\nimport React, { useState, useEffect } from \"react\"\nimport EditableDocument from \"../EditableDocument\"\nimport type { TranscriberProps } from \"../../types\"\n\nexport default ({\n  initialTranscriptionText,\n  onChange,\n  audio,\n  phraseBank: phraseBankParam,\n  validator\n}: TranscriberProps) => {\n  const [autoPlayStatus, changeAutoPlayStatus] = useState(\n    window.localStorage.NLP_ANNOTATOR_AUTOPLAY === \"true\"\n  )\n  // TODO create hook for usePhraseBank\n  const [phraseBank, changePhraseBank] = useState(undefined)\n  useEffect(() => {\n    async function loadPhraseBank() {\n      if (typeof phraseBankParam === \"string\") {\n        phraseBankParam = [phraseBankParam]\n      }\n      if (\n        Array.isArray(phraseBankParam) &&\n        phraseBankParam.every(\n          p =>\n            p.startsWith(\"http\") && (p.endsWith(\".txt\") || p.endsWith(\".csv\"))\n        )\n      ) {\n        const fullPhraseBank = []\n        for (const url of phraseBankParam) {\n          let found\n          const saveName = `NLP_ANNOTATOR_PHRASE_BANK_${url}`\n          if (window.localStorage[saveName]) {\n            try {\n              fullPhraseBank.push(...JSON.parse(window.localStorage[saveName]))\n              found = true\n            } catch (e) {}\n          }\n          if (!found) {\n            const urlPhrases = (await fetch(url).then(res => res.text()))\n              .split(\"\\n\")\n              .map(a => a.trim().toLowerCase())\n            window.localStorage[saveName] = JSON.stringify(urlPhrases)\n            fullPhraseBank.push(...urlPhrases)\n          }\n        }\n        changePhraseBank(fullPhraseBank)\n      } else if (Array.isArray(phraseBankParam)) {\n        changePhraseBank(phraseBankParam)\n      }\n    }\n    loadPhraseBank()\n    return () => {}\n  }, [phraseBankParam])\n\n  return (\n    <div>\n      <div style={{ textAlign: \"center\", padding: 10 }}>\n        <audio\n          autoPlay={autoPlayStatus}\n          loop\n          controlsList=\"nodownload\"\n          controls\n        >\n          <source src={audio} />\n        </audio>\n        <span style={{ fontSize: 12 }}>\n          Autoplay:{\" \"}\n          <input\n            checked={autoPlayStatus}\n            type=\"checkbox\"\n            onChange={() => {\n              window.localStorage.NLP_ANNOTATOR_AUTOPLAY = JSON.stringify(\n                window.localStorage.NLP_ANNOTATOR_AUTOPLAY !== \"true\"\n              )\n              changeAutoPlayStatus(\n                JSON.parse(window.localStorage.NLP_ANNOTATOR_AUTOPLAY)\n              )\n            }}\n          />\n        </span>\n      </div>\n      <div style={{ padding: 10 }}>\n        <EditableDocument\n          phraseBank={phraseBank}\n          validator={validator}\n          onChange={onChange}\n          initialText={initialTranscriptionText}\n        />\n      </div>\n    </div>\n  )\n}\n","// @flow\n\nimport React from \"react\"\n\nexport default ({ children }: any) => (\n  <div style={{ border: \"1px solid #ccc\", padding: 10, borderRadius: 4 }}>\n    {children}\n  </div>\n)\n","// @flow\n\nimport React, { useState, useLayoutEffect } from \"react\"\n\nimport type { NLPAnnotatorProps } from \"../../types\"\nimport SequenceAnnotator from \"../SequenceAnnotator\"\nimport DocumentLabeler from \"../DocumentLabeler\"\nimport Transcriber from \"../Transcriber\"\nimport colors from \"../../colors\"\nimport { green } from \"@material-ui/core/colors\"\nimport makeStyles from \"@material-ui/styles/makeStyles\"\nimport Container from \"../Container\"\nimport Button from \"@material-ui/core/Button\"\n\nconst useStyles = makeStyles({\n  finishButton: {\n    \"&&\": {\n      fontSize: 14,\n      textTransform: \"none\",\n      backgroundColor: green[500],\n      padding: 10,\n      color: \"#fff\",\n      margin: 10,\n      fontWeight: \"bold\",\n      \"&:hover\": {\n        backgroundColor: green[700]\n      }\n    }\n  }\n})\n\nexport default function NLPAnnotator(props: NLPAnnotatorProps) {\n  const classes = useStyles()\n  let [output, changeOutput] = useState(null)\n\n  if (output === null && props.type === \"transcribe\") {\n    output = props.initialTranscriptionText\n  }\n  if (output === null && props.type === \"label-sequence\") {\n    output = props.initialSequence || [{ text: props.document }]\n  }\n\n  useLayoutEffect(() => {\n    const eventFunc = e => {\n      if (e.key === \"Enter\") {\n        if (props.onFinish) props.onFinish(output)\n      }\n    }\n    window.addEventListener(\"keydown\", eventFunc)\n    return () => {\n      window.removeEventListener(\"keydown\", eventFunc)\n    }\n  })\n\n  const onChange = (newOutput: any) => {\n    if (props.onChange) props.onChange(newOutput)\n    changeOutput(newOutput)\n  }\n  if (props.labels && (props: any).labels.some(l => !l.color)) {\n    props = ({\n      ...props,\n      labels: (props: any).labels.map((l, i) => ({\n        color: colors[i % colors.length],\n        ...l\n      }))\n    }: any)\n  }\n  let finishButton = null\n  if (props.onFinish) {\n    finishButton = (\n      <Button\n        disabled={\n          props.validator &&\n          (props: any)\n            .validator(output)\n            .some(msg => msg.toLowerCase().includes(\"error:\"))\n        }\n        onClick={() => {\n          props.onFinish(output)\n        }}\n        className={classes.finishButton}\n      >\n        Complete (enter)\n      </Button>\n    )\n  }\n  if (props.type === \"label-sequence\") {\n    return (\n      <Container>\n        <SequenceAnnotator {...props} onChange={onChange} />\n        <div style={{ textAlign: \"right\" }}>{finishButton}</div>\n      </Container>\n    )\n  }\n  if (props.type === \"label-document\") {\n    return (\n      <Container>\n        <DocumentLabeler {...props} onChange={onChange} />\n        <div style={{ textAlign: \"right\" }}>{finishButton}</div>\n      </Container>\n    )\n  }\n  if (props.type === \"transcribe\") {\n    return (\n      <Container>\n        <Transcriber {...props} onChange={onChange} />\n        <div style={{ textAlign: \"right\" }}>{finishButton}</div>\n      </Container>\n    )\n  }\n  return null\n}\n","// @flow\n\nimport React, { Component } from \"react\"\nimport Dialog from \"@material-ui/core/Dialog\"\nimport Button from \"@material-ui/core/Button\"\nimport DialogTitle from \"@material-ui/core/DialogTitle\"\nimport DialogContent from \"@material-ui/core/DialogContent\"\nimport DialogActions from \"@material-ui/core/DialogActions\"\n\nexport default class ErrorBoundaryDialog extends Component {\n  state = { hasError: false, err: \"\" }\n  componentDidCatch(err, info) {\n    this.setState({\n      hasError: true,\n      err: err.toString() + \"\\n\\n\" + info.componentStack\n    })\n  }\n  render() {\n    if (this.state.hasError) {\n      return (\n        <Dialog open={this.state.hasError} onClose={this.props.onClose}>\n          <DialogTitle>Error Loading Annotator</DialogTitle>\n          <DialogContent>\n            <pre>{this.state.err}</pre>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={this.props.onClose}>Close</Button>\n          </DialogActions>\n        </Dialog>\n      )\n    }\n    return this.props.children\n  }\n}\n","// @flow\nimport React, { useState } from \"react\"\nimport ReactDOM from \"react-dom\"\nimport Editor, { examples } from \"./Editor\"\nimport NLPAnnotator from \"../NLPAnnotator\"\nimport ErrorBoundaryDialog from \"./ErrorBoundaryDialog.js\"\nimport { parse as queryString } from \"query-string\"\nimport { Base64 } from \"js-base64\"\n\nfunction getInitialAnnotatorProps() {\n  const { load } = queryString(window.location.search) || {}\n\n  if (load) {\n    try {\n      return JSON.parse(Base64.decode(load))\n    } catch (e) {\n      console.error(\"Problem loading from load get parameter. Error parsing.\")\n    }\n  }\n\n  return examples[\"Custom\"]()\n}\n\nexport default () => {\n  const [annotatorOpen, changeAnnotatorOpen] = useState(false)\n  const [annotatorProps, changeAnnotatorProps] = useState(\n    getInitialAnnotatorProps()\n  )\n  const [lastOutput, changeLastOutput] = useState()\n\n  return (\n    <div>\n      {annotatorOpen ? (\n        <ErrorBoundaryDialog\n          onClose={() => {\n            changeAnnotatorOpen(false)\n          }}\n        >\n          <NLPAnnotator\n            {...(annotatorProps: any)}\n            onFinish={output => {\n              changeLastOutput(output)\n              changeAnnotatorOpen(false)\n            }}\n          />\n        </ErrorBoundaryDialog>\n      ) : (\n        <Editor\n          initialAnnotatorProps={annotatorProps}\n          lastOutput={lastOutput}\n          onOpenAnnotator={props => {\n            // window.history.pushState(\n            //   window.document.title,\n            //   window.document.title,\n            //   window.location.origin +\n            //     window.location.pathname +\n            //     \"?load=\" +\n            //     Base64.encode(JSON.stringify(props, null, \"  \"))\n            // )\n            changeAnnotatorProps(props)\n            changeAnnotatorOpen(true)\n          }}\n        />\n      )}\n    </div>\n  )\n}\n","// @flow\n\nimport React, { useEffect, useState } from \"react\"\nimport { makeStyles } from \"@material-ui/styles\"\nimport { parse as queryString } from \"query-string\"\nimport Button from \"@material-ui/core/Button\"\nimport axios from \"axios\"\nimport NLPAnnotator from \"../NLPAnnotator\"\nimport set from \"lodash/set\"\nimport cloneDeep from \"lodash/cloneDeep\"\nimport download from \"downloadjs\"\n\nconst useStyles = makeStyles({\n  header: {\n    display: \"flex\",\n    padding: 10,\n    backgroundColor: \"#f8f8f8\",\n    alignItems: \"center\",\n    borderBottom: \"1px solid #ccc\"\n  },\n  button: {\n    marginLeft: 10,\n    marginRight: 10\n  },\n  content: {\n    padding: 10\n  },\n  warning: {\n    fontSize: 11,\n    color: \"#f00\",\n    padding: 10,\n    textAlign: \"center\"\n  }\n})\n\nexport default () => {\n  const c = useStyles()\n  const [samples, changeSamples] = useState([])\n  const [sampleIndex, changeSampleIndex] = useState(0)\n  const [{ loadUrl, outputName = \"dataset\" }, changeMetaInfo] = useState({})\n  useEffect(() => {\n    async function loadData() {\n      const { load_url: loadUrl, output_name: outputName } =\n        queryString(window.location.search) || {}\n\n      changeMetaInfo({ loadUrl, outputName })\n\n      if (loadUrl) {\n        const { data } = await axios.get(loadUrl)\n        changeSamples(data)\n      }\n    }\n    loadData()\n    return () => {}\n  }, [])\n\n  return (\n    <div>\n      <div className={c.header}>\n        <div>\n          <div>\n            Sample #{sampleIndex + 1} / {samples.length}\n          </div>\n          <div>\n            <form method=\"GET\">\n              <input name=\"load_url\" defaultValue={loadUrl} />\n              <button>load</button>\n            </form>\n          </div>\n        </div>\n        <div style={{ flexGrow: 1 }} />\n        <Button\n          className={c.button}\n          onClick={() => {\n            // TODO\n            download(\n              JSON.stringify(samples),\n              outputName + \".json\",\n              \"application/json\"\n            )\n          }}\n        >\n          Download\n        </Button>\n        <Button\n          className={c.button}\n          onClick={() =>\n            changeSampleIndex(\n              (sampleIndex - 1 + samples.length) % samples.length\n            )\n          }\n        >\n          Prev Sample\n        </Button>\n        <Button\n          className={c.button}\n          variant=\"outlined\"\n          onClick={() => changeSampleIndex((sampleIndex + 1) % samples.length)}\n        >\n          Next Sample (enter)\n        </Button>\n      </div>\n      <div className={c.warning}>\n        This page will not save your progress on refresh.\n      </div>\n      {!loadUrl && <div className={c.warning}>load_url must be specified</div>}\n      {samples.length > 0 && (\n        <div className={c.content}>\n          <NLPAnnotator\n            key={sampleIndex}\n            {...samples[sampleIndex]}\n            onChange={answer => {\n              const { type, multiple } = samples[sampleIndex]\n              const prop =\n                type === \"label-document\" && multiple\n                  ? \"initialLabels\"\n                  : type === \"label-document\" && !multiple\n                  ? \"initialLabel\"\n                  : type === \"label-sequence\"\n                  ? \"initialSequence\"\n                  : type === \"transcribe\"\n                  ? \"initialTranscriptionText\"\n                  : null\n              console.log(set(cloneDeep(samples), [sampleIndex, prop], answer))\n              changeSamples(\n                set(cloneDeep(samples), [sampleIndex, prop], answer)\n              )\n            }}\n          />\n        </div>\n      )}\n    </div>\n  )\n}\n","// @flow\n\nimport React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport Theme from \"./components/Theme\"\nimport DemoSite from \"./components/DemoSite\"\nimport DatasetViewer from \"./components/DatasetViewer\"\n\nReactDOM.render(\n  <Theme>\n    {window.location.search.includes(\"load_url\") ? (\n      <DatasetViewer />\n    ) : (\n      <DemoSite />\n    )}\n  </Theme>,\n  document.getElementById(\"root\")\n)\n"],"sourceRoot":""}