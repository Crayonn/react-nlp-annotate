{"version":3,"sources":["components/Theme/index.js","components/DemoSite/Editor.js","string-to-sequence.js","components/Document/index.js","components/LabelButton/index.js","colors.js","components/LabelSelector/index.js","merge-sequence.js","components/SequenceAnnotator/index.js","components/DocumentLabeler/index.js","components/EditableDocument/index.js","components/Transcriber/index.js","components/Container/index.js","components/NLPAnnotator/index.js","components/DemoSite/ErrorBoundaryDialog.js","components/DemoSite/index.js","components/DatasetViewer/index.js","index.js"],"names":["useStyles","makeStyles","container","fontFamily","theme","createMuiTheme","typography","overrides","MuiButton","root","textTransform","Theme","_ref","children","classes","react_default","a","createElement","ThemeProvider","className","editBar","padding","borderBottom","backgroundColor","display","alignItems","& .button","margin","select","width","fontSize","contentArea","specificationArea","loadSavedInput","JSON","parse","window","localStorage","getItem","e","examples","SimpleLabelSequence","type","document","labels","id","displayName","SimpleLabelDocument","Custom","Editor","initialAnnotatorProps","onOpenAnnotator","lastOutput","c","_useState","useState","_useState2","Object","slicedToArray","currentError","changeCurrentError","_useState3","_useState4","selectedExample","changeSelectedExample","_useState5","_useState6","outputDialogOpen","changeOutputOpen","_useState7","stringify","_useState8","currentJSONValue","changeCurrentJSONValue","style","flexGrow","react_select_browser_esm","value","label","options","keys","map","s","onChange","selectedOption","Button","disabled","onClick","variant","Boolean","border","lib_default","language","code","setItem","toString","height","default_highlight","Dialog","fullScreen","open","DialogTitle","DialogContent","minWidth","DialogActions","stringToSequence","doc","m","sepRe","indices","exec","push","index","length","concat","filter","_","i","text","slice","Document","sequence","_ref$onHighlightedCha","onHighlightedChanged","_ref$onSequenceChange","onSequenceChange","_ref$nothingHighlight","nothingHighlighted","_ref$colorLabelMap","colorLabelMap","mouseDown","changeMouseDown","_useState4$","firstSelected","lastSelected","changeHighlightedRangeState","changeHighlightedRange","_ref2","_ref3","first","last","highlightedItems","Math","min","max","onMouseDown","onMouseUp","seq","defineProperty","key","onMouseMove","color","paddingLeft","paddingRight","borderRadius","userSelect","includes","marginTop","marginBottom","paddingTop","paddingBottom","Tooltip","title","placement","flatMap","cursor","alignSelf","justifyContent","marginLeft","&:hover","opacity","&.small","fontWeight","deleteableIcon","hotkeyText","tooltip","whiteSpace","Label","props","parent","description","small","hasChildren","hotkey","deletable","tooltipClasses","useMemo","button","classnames","FolderOpen_default","marginRight","arrow","colors","LabelSelector","onSelectLabel","_ref$hotkeysEnabled","hotkeysEnabled","parents","changeParents","currentParent","undefined","hotkeyLabelMap","r","labelHotkeyMap","_step","_iterator","_createForOfIteratorHelper","toLowerCase","split","n","done","letter","err","f","useEffect","eventFunc","labelId","some","l2","findRouteFromParents","find","l","addEventListener","removeEventListener","flexWrap","LabelButton","p","objectSpread","assign","indexOf","mergeSequence","newSeq","current","reduce","acc","SequenceAnnotator","changeHighlightedItems","initialSequence","entity","changeSequence","buildText","newSequence","itemIndex","item","borderTop","DocumentLabeler","initialLabels","initialLabel","selectedLabels","changeSelectedLabels","console","log","multipleLabels","newSelectedLabels","spellChecker","Spelling","enDictionary","components","createOption","random","colourStyles","control","styles","option","data","isDisabled","isFocused","isSelected","chroma","yellow","alpha","css","contrast","darken","multiValue","multiValueLabel","multiValueRemove","_ref4",":hover","EditableDocument","_ref5","_ref5$initialText","initialText","_ref5$lowerCaseMode","lowerCaseMode","_ref5$phraseBank","phraseBank","_ref5$validator","validator","inputValue","changeInputValue","green","changeValue","validationErrors","changeValidationErrors","isInDictionary","trim","lookup","found","loadOptions","_ref7","asyncToGenerator","regenerator_default","mark","_callee","scRes","possiblePhrases","wrap","_context","prev","next","abrupt","startsWith","suggestions","_ref8","word","stop","_x","apply","this","arguments","dist_react_select_browser_esm","isClearable","isMulti","v","result","join","onInputChange","onKeyDown","_ref6","toConsumableArray","placeholder","red","Transcriber","initialTranscriptionText","audio","phraseBankParam","NLP_ANNOTATOR_AUTOPLAY","autoPlayStatus","changeAutoPlayStatus","changePhraseBank","_loadPhraseBank","fullPhraseBank","url","saveName","_fullPhraseBank","_fullPhraseBank2","urlPhrases","Array","isArray","every","endsWith","Transcriber_createForOfIteratorHelper","fetch","then","res","sent","t0","finish","loadPhraseBank","textAlign","autoPlay","loop","controlsList","controls","src","checked","Container","onNext","onPrev","_ref$currentSampleInd","currentSampleIndex","_ref$numberOfSamples","numberOfSamples","titleContent","onClickHeaderItem","headerItems","name","Workspace","headerLeftSide","Box","Typography","iconSidebarItems","rightSidebarItems","defaultValidator","NLPAnnotator","output","changeOutput","onFinish","newOutput","isPassingValidation","msg","annotator","useEventCallback","ErrorBoundaryDialog","state","hasError","info","setState","componentStack","onClose","Component","DemoSite","annotatorOpen","changeAnnotatorOpen","load","queryString","location","search","Base64","decode","error","getInitialAnnotatorProps","annotatorProps","changeAnnotatorProps","changeLastOutput","ErrorBoundaryDialog_ErrorBoundaryDialog","DemoSite_Editor","header","content","warning","DatasetViewer","samples","changeSamples","sampleIndex","changeSampleIndex","_useState6$","loadUrl","_useState6$$outputNam","outputName","changeMetaInfo","_loadData","_yield$axios$get","load_url","output_name","axios","get","loadData","method","defaultValue","download","answer","_samples$sampleIndex","multiple","prop","set","cloneDeep","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.dc4ea972.chunk.js","sourcesContent":["// @flow\n\nimport React from \"react\"\nimport { makeStyles } from \"@material-ui/styles\"\nimport { ThemeProvider, createMuiTheme } from \"@material-ui/core/styles\"\nimport \"./theme.css\"\n\nconst useStyles = makeStyles({\n  container: {\n    fontFamily: '\"Inter UI\", sans-serif'\n  }\n})\n\nconst theme = createMuiTheme({\n  typography: {\n    fontFamily: '\"Inter UI\", \"Roboto\", sans-serif'\n  },\n  overrides: {\n    MuiButton: {\n      root: {\n        textTransform: \"none\"\n      }\n    }\n  }\n})\n\nexport default ({ children }: any) => {\n  const classes = useStyles()\n  return (\n    <ThemeProvider theme={theme}>\n      <div className={classes.container}>{children}</div>\n    </ThemeProvider>\n  )\n}\n","// @flow\n\nimport React, { useState } from \"react\"\nimport Button from \"@material-ui/core/Button\"\nimport { makeStyles } from \"@material-ui/styles\"\nimport Select from \"react-select\"\nimport Code from \"react-syntax-highlighter\"\nimport Dialog from \"@material-ui/core/Dialog\"\nimport DialogTitle from \"@material-ui/core/DialogTitle\"\nimport DialogContent from \"@material-ui/core/DialogContent\"\nimport DialogActions from \"@material-ui/core/DialogActions\"\nimport MonacoEditor from \"react-monaco-editor\"\n\nconst useStyles = makeStyles({\n  editBar: {\n    padding: 10,\n    borderBottom: \"1px solid #ccc\",\n    backgroundColor: \"#f8f8f8\",\n    display: \"flex\",\n    alignItems: \"center\",\n    \"& .button\": { margin: 5 }\n  },\n  select: { width: 240, fontSize: 14 },\n  contentArea: {\n    padding: 10\n  },\n  specificationArea: {\n    padding: 10\n  }\n})\n\nconst loadSavedInput = () => {\n  try {\n    return JSON.parse(window.localStorage.getItem(\"nlpCustomInput\") || \"{}\")\n  } catch (e) {\n    return {}\n  }\n}\n\nexport const examples = {\n  SimpleLabelSequence: () => ({\n    type: \"label-sequence\",\n    document: `Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis pharetra ipsum tristique ligula venenatis placerat. Interdum et malesuada fames ac ante ipsum primis in faucibus. Fusce mollis velit nec tellus sollicitudin aliquam. In velit erat, iaculis id consectetur et, tincidunt sit amet mauris. Quisque ultricies, purus eleifend congue malesuada, ipsum erat molestie dolor, in pellentesque lacus purus vel nisl. Interdum et malesuada fames ac ante ipsum primis in faucibus. Nulla sed vestibulum magna. Quisque ut lorem imperdiet, aliquam velit nec, dictum felis.`,\n    labels: [\n      {\n        id: \"noun\",\n        displayName: \"Noun\"\n      },\n      {\n        id: \"proper-noun\",\n        displayName: \"Proper Noun\"\n      }\n    ]\n  }),\n  SimpleLabelDocument: () => ({\n    type: \"label-document\",\n    document: `Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis pharetra ipsum tristique ligula venenatis placerat. Interdum et malesuada fames ac ante ipsum primis in faucibus. Fusce mollis velit nec tellus sollicitudin aliquam. In velit erat, iaculis id consectetur et, tincidunt sit amet mauris. Quisque ultricies, purus eleifend congue malesuada, ipsum erat molestie dolor, in pellentesque lacus purus vel nisl. Interdum et malesuada fames ac ante ipsum primis in faucibus. Nulla sed vestibulum magna. Quisque ut lorem imperdiet, aliquam velit nec, dictum felis.`,\n    labels: [\n      {\n        id: \"latin\",\n        displayName: \"Latin\"\n      },\n      {\n        id: \"english\",\n        displayName: \"English\"\n      },\n      {\n        id: \"german\",\n        displayName: \"German\"\n      }\n    ]\n  }),\n  Custom: () => loadSavedInput()\n}\n\nconst Editor = ({\n  initialAnnotatorProps,\n  onOpenAnnotator,\n  lastOutput\n}: any) => {\n  const c = useStyles()\n  const [currentError, changeCurrentError] = useState()\n  const [selectedExample, changeSelectedExample] = useState(\n    window.localStorage.getItem(\"nlpCustomInput\")\n      ? \"Custom\"\n      : \"SimpleLabelSequence\"\n  )\n  const [outputDialogOpen, changeOutputOpen] = useState(lastOutput)\n  const [currentJSONValue, changeCurrentJSONValue] = useState(\n    initialAnnotatorProps\n      ? JSON.stringify(initialAnnotatorProps, null, \"  \")\n      : JSON.stringify(examples[selectedExample](), null, \"  \")\n  )\n  return (\n    <div>\n      <div className={c.editBar}>\n        <h3>React NLP Annotate</h3>\n        <div style={{ flexGrow: 1 }} />\n        <div>\n          <div style={{ display: \"inline-flex\" }}>\n            <Select\n              className={c.select}\n              value={{ label: selectedExample, value: selectedExample }}\n              options={Object.keys(examples).map(s => ({\n                label: s,\n                value: s\n              }))}\n              onChange={selectedOption => {\n                changeSelectedExample(selectedOption.value)\n\n                changeCurrentJSONValue(\n                  JSON.stringify(\n                    selectedOption.value === \"Custom\"\n                      ? loadSavedInput()\n                      : examples[selectedOption.value](),\n                    null,\n                    \"  \"\n                  )\n                )\n              }}\n            />\n          </div>\n          <Button\n            className=\"button\"\n            disabled={!lastOutput}\n            onClick={() => changeOutputOpen(true)}\n          >\n            View Output\n          </Button>\n          <Button\n            className=\"button\"\n            variant=\"outlined\"\n            disabled={Boolean(currentError)}\n            onClick={() =>\n              onOpenAnnotator(\n                selectedExample === \"Custom\"\n                  ? JSON.parse(currentJSONValue)\n                  : examples[selectedExample]()\n              )\n            }\n          >\n            Open Annotator\n          </Button>\n        </div>\n      </div>\n      <div\n        className={c.contentArea}\n        style={\n          currentError\n            ? { border: \"2px solid #f00\" }\n            : { border: \"2px solid #fff\" }\n        }\n      >\n        <div>\n          <MonacoEditor\n            value={currentJSONValue}\n            language=\"javascript\"\n            onChange={code => {\n              try {\n                window.localStorage.setItem(\n                  \"nlpCustomInput\",\n                  JSON.stringify(JSON.parse(code))\n                )\n                changeCurrentError(null)\n              } catch (e) {\n                changeCurrentError(e.toString())\n              }\n              changeCurrentJSONValue(code)\n            }}\n            width=\"100%\"\n            height=\"550px\"\n          />\n        </div>\n      </div>\n      <div className={c.specificationArea}>\n        <h2>React NLP Annotate Format</h2>\n        <Code language=\"javascript\">{`\n// There are several types of annotators you can use...\n\nexport type LabelDocumentProps = {\n  type: \"label-document\",\n  labels: Array<Label>,\n  multipleLabels?: boolean,\n  initialLabels?: Array<string>,\n  document: string,\n  onChange: (Array<string> | string | null) => any\n}\n\nexport type SequenceAnnotatorProps = {\n  type: \"label-sequence\",\n  labels: Array<Label>,\n  initialSequence?: Array<SequenceItem>,\n  document: string,\n  onChange: (sequence: Array<SequenceItem>) => any\n}\n\nexport type TranscriberProps = {\n  type: \"transcribe\",\n  audio: string,\n  phraseBank?: Array<string>,\n  validator?: string => Array<string>,\n  initialTranscriptionText?: string,\n  onChange: string => any\n}\n\nexport type NLPAnnotatorProps = {\n  ...\n    | $Exact<SequenceAnnotatorProps>\n    | $Exact<LabelDocumentProps>\n    | $Exact<TranscriberProps>,\n  onFinish?: string,\n  onChange?: string\n}\n`}</Code>\n      </div>\n      <Dialog fullScreen open={outputDialogOpen}>\n        <DialogTitle>React NLP Annotate Output</DialogTitle>\n        <DialogContent style={{ minWidth: 400 }}>\n          <MonacoEditor\n            value={JSON.stringify(lastOutput, null, \"  \")}\n            language=\"javascript\"\n            width=\"100%\"\n            height=\"550px\"\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => changeOutputOpen(false)}>Close</Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  )\n}\n\nexport default Editor\n","// @flow\n\nconst stringToSequence = (doc: string) => {\n  const sepRe = /[a-zA-ZÀ-ÿ]+/g\n  let m\n  let indices = [0]\n  do {\n    m = sepRe.exec(doc)\n    if (m) {\n      indices.push(m.index)\n      indices.push(m.index + m[0].length)\n    }\n  } while (m)\n  indices = indices.concat([doc.length])\n  return indices\n    .filter((_, i) => indices[i] !== indices[i + 1])\n    .map((_, i) => ({\n      text: doc.slice(indices[i], indices[i + 1])\n    }))\n    .filter(s => s.text.length > 0)\n}\n\nexport default stringToSequence\n","// @flow\n\nimport React, { useState } from \"react\"\nimport type { SequenceItem } from \"../../types\"\nimport { makeStyles } from \"@material-ui/styles\"\nimport stringToSequence from \"../../string-to-sequence.js\"\nimport Tooltip from \"@material-ui/core/Tooltip\"\n\nconst useStyles = makeStyles({})\n\ntype Props = {\n  sequence: Array<SequenceItem>,\n  canModifySequence?: boolean,\n  onSequenceChange?: (Array<SequenceItem>) => any,\n  onHighlightedChanged?: (Array<number>) => any,\n  nothingHighlighted?: boolean,\n  colorLabelMap?: Object\n}\n\nexport default function Document({\n  sequence,\n  onHighlightedChanged = () => null,\n  onSequenceChange = () => null,\n  nothingHighlighted = false,\n  colorLabelMap = {}\n}: Props) {\n  const [mouseDown, changeMouseDown] = useState()\n  const [\n    [firstSelected, lastSelected],\n    changeHighlightedRangeState\n  ] = useState([null, null])\n  const changeHighlightedRange = ([first, last]) => {\n    changeHighlightedRangeState([first, last])\n    const highlightedItems = []\n    for (let i = Math.min(first, last); i <= Math.max(first, last); i++)\n      highlightedItems.push(i)\n    onHighlightedChanged(highlightedItems)\n  }\n  let highlightedItems = []\n  if (!nothingHighlighted && firstSelected !== null && lastSelected !== null) {\n    for (\n      let i = Math.min(firstSelected, lastSelected);\n      i <= Math.max(firstSelected, lastSelected);\n      i++\n    )\n      highlightedItems.push(i)\n  }\n\n  return (\n    <div\n      onMouseDown={() => changeMouseDown(true)}\n      onMouseUp={() => changeMouseDown(false)}\n    >\n      {sequence.map((seq, i) => (\n        <span\n          key={i}\n          onMouseDown={() => {\n            if (seq.label) return\n            changeHighlightedRange([i, i])\n          }}\n          onMouseMove={() => {\n            if (seq.label) return\n            if (mouseDown && i !== lastSelected) {\n              changeHighlightedRange([\n                firstSelected === null ? i : firstSelected,\n                i\n              ])\n            }\n          }}\n          style={\n            seq.label\n              ? {\n                  display: \"inline-flex\",\n                  backgroundColor:\n                    seq.color || colorLabelMap[seq.label] || \"#333\",\n                  color: \"#fff\",\n                  padding: 4,\n                  margin: 4,\n                  paddingLeft: 10,\n                  paddingRight: 10,\n                  borderRadius: 4,\n                  userSelect: \"none\"\n                }\n              : {\n                  display: \"inline-flex\",\n                  backgroundColor:\n                    seq.text !== \" \" && highlightedItems.includes(i)\n                      ? \"#ccc\"\n                      : \"inherit\",\n                  color: \"#333\",\n                  marginTop: 4,\n                  marginBottom: 4,\n                  paddingTop: 4,\n                  paddingBottom: 4,\n                  paddingLeft: 2,\n                  paddingRight: 2,\n                  userSelect: \"none\"\n                }\n          }\n          key={i}\n        >\n          {seq.label ? (\n            <Tooltip title={seq.label} placement=\"bottom\">\n              <div>{seq.text}</div>\n            </Tooltip>\n          ) : (\n            <div>{seq.text}</div>\n          )}\n          {seq.label && (\n            <div\n              onClick={() => {\n                onSequenceChange(\n                  sequence\n                    .flatMap(s => (s !== seq ? s : stringToSequence(s.text)))\n                    .filter(s => s.text.length > 0)\n                )\n              }}\n              style={{\n                display: \"inline-flex\",\n                cursor: \"pointer\",\n                alignSelf: \"center\",\n                fontSize: 11,\n                width: 18,\n                height: 18,\n                alignItems: \"center\",\n                justifyContent: \"center\",\n                marginLeft: 4,\n                borderRadius: 9,\n                color: \"#fff\",\n                backgroundColor: \"rgba(0,0,0,0.2)\"\n              }}\n            >\n              <span>{\"\\u2716\"}</span>\n            </div>\n          )}\n        </span>\n      ))}\n    </div>\n  )\n}\n","// @flow\n\nimport React, { useMemo } from \"react\"\nimport type { Label as LabelType } from \"../../types.js\"\nimport FolderOpenIcon from \"@material-ui/icons/FolderOpen\"\nimport classnames from \"classnames\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport Tooltip from \"@material-ui/core/Tooltip\"\n\nconst useStyles = makeStyles({\n  label: {\n    display: \"inline-flex\",\n    cursor: \"pointer\",\n    padding: 8,\n    paddingLeft: 12,\n    paddingRight: 12,\n    margin: 4,\n    borderRadius: 4,\n    fontSize: 18,\n    color: \"#fff\",\n    alignItems: \"center\",\n    \"&:hover\": {\n      opacity: 0.6\n    },\n    \"&.small\": {\n      fontSize: 12,\n      fontWeight: \"bold\"\n    }\n  },\n  deleteableIcon: {\n    display: \"inline-flex\",\n    cursor: \"pointer\",\n    alignSelf: \"center\",\n    fontSize: 11,\n    width: 18,\n    height: 18,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    marginLeft: 4,\n    borderRadius: 9,\n    color: \"#fff\",\n    backgroundColor: \"rgba(0,0,0,0.2)\"\n  },\n  hotkeyText: {\n    paddingLeft: 4\n  },\n  tooltip: {\n    whiteSpace: \"pre-wrap\"\n  }\n})\n\nconst Label = (props: {\n  ...$Exact<LabelType>,\n  hasChildren?: boolean,\n  small?: boolean,\n  hotkey?: ?string,\n  deletable?: boolean,\n  onClick: string => any\n}) => {\n  const {\n    parent,\n    color,\n    displayName,\n    description,\n    id,\n    small,\n    hasChildren,\n    hotkey,\n    deletable\n  } = props\n  const classes = useStyles()\n  const tooltipClasses = useMemo(() => ({ tooltip: classes.tooltip }), [\n    classes\n  ])\n\n  const button = (\n    <div\n      onClick={() => props.onClick(id)}\n      className={classnames(classes.label, small && \"small\")}\n      style={{ backgroundColor: color }}\n    >\n      {hasChildren && (\n        <FolderOpenIcon\n          style={{\n            width: small ? 12 : 20,\n            height: small ? 12 : 20,\n            marginRight: small ? 3 : 6\n          }}\n        />\n      )}\n      <div>{displayName || id}</div>\n      {hotkey && <div className={classes.hotkeyText}>({hotkey})</div>}\n      {deletable && (\n        <div className={classes.deleteableIcon}>\n          <span>{\"\\u2716\"}</span>\n        </div>\n      )}\n    </div>\n  )\n\n  if (description) {\n    return (\n      <Tooltip title={description} arrow classes={tooltipClasses}>\n        {button}\n      </Tooltip>\n    )\n  } else {\n    return button\n  }\n}\n\nexport default Label\n","// @flow\n\nimport * as colors from \"@material-ui/core/colors\"\n\nexport default Object.keys(colors)\n  .filter(c => c !== \"common\")\n  .map(c => colors[c][700])\n","// @flow\n\nimport React, { useState, useEffect, useMemo } from \"react\"\nimport type { Label as LabelType } from \"../../types.js\"\nimport LabelButton from \"../LabelButton\"\nimport colors from \"../../colors\"\n\nconst findRouteFromParents = (labelId, labels) => {\n  if (!labelId) return []\n  const label = labels.find(l => (l.id || \"root\") === labelId) || {}\n  if (label) {\n    return findRouteFromParents(label.parent, labels).concat([labelId])\n  }\n  return [labelId]\n}\n\nexport default ({\n  labels,\n  onSelectLabel,\n  hotkeysEnabled = false\n}: {\n  labels: Array<LabelType>,\n  onSelectLabel: string => any\n}) => {\n  const [parents, changeParents] = useState([])\n  const currentParent =\n    parents.length > 0 ? parents[parents.length - 1] : undefined\n\n  const hotkeyLabelMap = { r: \"root\" }\n  const labelHotkeyMap = { root: \"r\" }\n  for (let i = 0; i < labels.length; i++) {\n    const label = labels[i]\n    const letters = (label.displayName || label.id).toLowerCase().split(\"\")\n    for (const letter of letters) {\n      if (!hotkeyLabelMap[letter]) {\n        hotkeyLabelMap[letter] = label.id\n        labelHotkeyMap[label.id] = letter\n        break\n      }\n    }\n  }\n\n  useEffect(() => {\n    if (!hotkeysEnabled) return\n    const eventFunc = e => {\n      if (hotkeyLabelMap[e.key]) {\n        const labelId = hotkeyLabelMap[e.key]\n        if (!labels.some(l2 => l2.parent === labelId)) {\n          if (labelId === \"root\") {\n            changeParents([])\n          } else {\n            onSelectLabel(labelId)\n          }\n        } else {\n          changeParents(findRouteFromParents(labelId, labels))\n        }\n      }\n    }\n\n    window.addEventListener(\"keydown\", eventFunc)\n    return () => {\n      window.removeEventListener(\"keydown\", eventFunc)\n    }\n  }, [changeParents, onSelectLabel, hotkeysEnabled])\n\n  return (\n    <div>\n      {labels.some(l => l.parent) && (\n        <div\n          style={{ alignItems: \"center\", display: \"flex\", flexWrap: \"wrap\" }}\n        >\n          <LabelButton\n            small\n            color={parents.length > 0 ? \"#333\" : \"#ccc\"}\n            displayName=\"Root (r)\"\n            id=\"\"\n            onClick={() => changeParents([])}\n          />\n          {parents\n            .map(p => labels.find(l => l.id === p))\n            .filter(Boolean)\n            .map(l => ({\n              ...l,\n              hasChildren: labels.some(l2 => l2.parent === l.id)\n            }))\n            .map((l, i) => (\n              <LabelButton\n                small\n                {...l}\n                hotkey={labelHotkeyMap[l.id]}\n                onClick={() => {\n                  changeParents(parents.slice(0, parents.indexOf(l.id) + 1))\n                }}\n              />\n            ))}\n        </div>\n      )}\n      <div style={{ display: \"flex\", alignItems: \"center\", flexWrap: \"wrap\" }}>\n        {labels\n          .filter(l => l.parent === currentParent)\n          .map(l => ({\n            ...l,\n            hasChildren: labels.some(l2 => l2.parent === l.id)\n          }))\n          .map((l, i) => (\n            <LabelButton\n              key={l.id}\n              {...l}\n              hotkey={hotkeysEnabled ? labelHotkeyMap[l.id] : null}\n              onClick={\n                !l.hasChildren\n                  ? onSelectLabel\n                  : () => {\n                      changeParents(parents.concat([l.id]))\n                    }\n              }\n            />\n          ))}\n      </div>\n    </div>\n  )\n}\n","// @flow\n\nconst mergeSequence = (\n  seq: Array<{ text: string, label?: string, color?: string }>\n) => {\n  const newSeq = []\n  let current = [seq[0]]\n  for (let i = 1; i < seq.length; i++) {\n    if (current[0].label === seq[i].label) {\n      current.push(seq[i])\n    } else {\n      newSeq.push({\n        label: current[0].label,\n        text: current.reduce((acc, c) => acc + c.text, \"\")\n      })\n      current = [seq[i]]\n    }\n  }\n  newSeq.push({\n    label: current[0].label,\n    text: current.reduce((acc, c) => acc + c.text, \"\")\n  })\n  return newSeq\n}\n\nexport default mergeSequence\n","// @flow\n\nimport React, { useState, useMemo } from \"react\"\n\nimport type { SequenceAnnotatorProps } from \"../../types\"\nimport Document from \"../Document\"\nimport LabelSelector from \"../LabelSelector\"\nimport stringToSequence from \"../../string-to-sequence.js\"\nimport mergeSequence from \"../../merge-sequence.js\"\nimport colors from \"../../colors\"\n\nexport default function SequenceAnnotator(props: SequenceAnnotatorProps) {\n  const [highlightedItems, changeHighlightedItems] = useState([])\n  const [sequence, changeSequence] = useState(() =>\n    props.initialSequence\n      ? props.initialSequence.flatMap(entity =>\n          entity.label ? [entity] : stringToSequence(entity.text)\n        )\n      : stringToSequence(props.document)\n  )\n  const colorLabelMap = useMemo(\n    () =>\n      props.labels.reduce(\n        (acc, l, i) => ((acc[l.id] = colors[i % colors.length]), acc),\n        {}\n      ),\n    [props.labels]\n  )\n\n  return (\n    <div>\n      <div>\n        <LabelSelector\n          hotkeysEnabled={props.hotkeysEnabled}\n          labels={props.labels}\n          onSelectLabel={(label: string) => {\n            const { color } = props.labels.find(({ id }) => label === id) || {}\n            let buildText = \"\"\n            const newSequence = []\n            for (let itemIndex = 0; itemIndex < sequence.length; itemIndex++) {\n              const item = sequence[itemIndex]\n              if (!highlightedItems.includes(itemIndex) || item.label) {\n                if (buildText.length > 0) {\n                  newSequence.push({\n                    text: buildText,\n                    color,\n                    label\n                  })\n                  buildText = \"\"\n                }\n                newSequence.push(item)\n              } else {\n                buildText += item.text\n              }\n            }\n            if (buildText.length > 0) {\n              newSequence.push({\n                text: buildText,\n                color,\n                label\n              })\n            }\n\n            changeSequence(newSequence)\n            props.onChange(mergeSequence(newSequence))\n            changeHighlightedItems([])\n          }}\n        />\n      </div>\n      <div style={{ borderTop: \"1px solid #ccc\", marginTop: 8, paddingTop: 5 }}>\n        <Document\n          colorLabelMap={colorLabelMap}\n          nothingHighlighted={highlightedItems.length === 0}\n          onHighlightedChanged={highlightedItems =>\n            changeHighlightedItems(highlightedItems)\n          }\n          onSequenceChange={sequence => {\n            changeSequence(sequence)\n            props.onChange(mergeSequence(sequence))\n          }}\n          sequence={sequence}\n        />\n      </div>\n    </div>\n  )\n}\n","// @flow\n\nimport React, { useState, useMemo } from \"react\"\n\nimport type { LabelDocumentProps } from \"../../types\"\nimport Document from \"../Document\"\nimport LabelSelector from \"../LabelSelector\"\nimport stringToSequence from \"../../string-to-sequence.js\"\nimport LabelButton from \"../LabelButton\"\n\nexport default function DocumentLabeler(props: LabelDocumentProps) {\n  const [selectedLabels, changeSelectedLabels] = useState(\n    props.initialLabels || (props.initialLabel ? [props.initialLabel] : [])\n  )\n  const sequence = useMemo(() => stringToSequence(props.document), [\n    props.document\n  ])\n  return (\n    <div>\n      <div>\n        <LabelSelector\n          hotkeysEnabled={props.hotkeysEnabled}\n          labels={props.labels}\n          onSelectLabel={(labelId: string) => {\n            console.log({ labelId })\n            if (props.multipleLabels) {\n              changeSelectedLabels(selectedLabels.concat([labelId]))\n              props.onChange(selectedLabels.concat([labelId]))\n            } else {\n              props.onChange(labelId)\n              changeSelectedLabels([labelId])\n            }\n          }}\n        />\n      </div>\n      <div style={{ borderTop: \"1px solid #ccc\", marginTop: 8, paddingTop: 5 }}>\n        <div>\n          {selectedLabels.map(labelId => {\n            const label = props.labels.find(l => l.id === labelId)\n            if (!label) return\n            return (\n              <LabelButton\n                key={labelId}\n                {...label}\n                small\n                deletable\n                onClick={(labelId: string) => {\n                  const newSelectedLabels = selectedLabels.filter(\n                    l => l !== labelId\n                  )\n                  changeSelectedLabels(newSelectedLabels)\n                  if (props.multipleLabels) {\n                    props.onChange(newSelectedLabels)\n                  } else {\n                    props.onChange(null)\n                  }\n                }}\n              />\n            )\n          })}\n        </div>\n        <Document nothingHighlighted sequence={sequence} />\n      </div>\n    </div>\n  )\n}\n","// @flow\n\nimport React, { useState } from \"react\"\nimport CreatableSelect from \"react-select/async-creatable\"\nimport Spelling from \"spelling\"\nimport enDictionary from \"spelling/dictionaries/en_US\"\nimport chroma from \"chroma-js\"\nimport { green, yellow, red } from \"@material-ui/core/colors\"\n\nconst spellChecker = new Spelling(enDictionary)\n\nconst components = {}\nconst createOption = (label, color) => ({\n  label,\n  value: label + Math.random().toString(),\n  color\n})\n\nconst colourStyles = {\n  control: styles => ({ ...styles, backgroundColor: \"white\" }),\n  option: (styles, { data, isDisabled, isFocused, isSelected }) => {\n    const color = chroma(data.color || yellow[700])\n    return {\n      ...styles,\n      backgroundColor: isDisabled\n        ? null\n        : isSelected\n        ? data.color\n        : isFocused\n        ? color.alpha(0.1).css()\n        : color.alpha(0.05).css(),\n      color: isDisabled\n        ? \"#ccc\"\n        : isSelected\n        ? chroma.contrast(color, \"white\") > 2\n          ? \"white\"\n          : \"black\"\n        : color\n            .darken()\n            .darken()\n            .css(),\n      cursor: isDisabled ? \"not-allowed\" : \"default\"\n    }\n  },\n  multiValue: (styles, { data }) => {\n    const color = chroma(data.color)\n    return {\n      ...styles,\n      backgroundColor: color.alpha(0.1).css()\n    }\n  },\n  multiValueLabel: (styles, { data }) => ({\n    ...styles,\n    color: chroma(data.color)\n      .darken()\n      .darken()\n      .css()\n  }),\n  multiValueRemove: (styles, { data }) => ({\n    ...styles,\n    color: chroma(data.color)\n      .darken()\n      .darken()\n      .css(),\n    \":hover\": {\n      backgroundColor: data.color,\n      color: \"white\"\n    }\n  })\n}\n\nexport default function EditableDocument({\n  initialText = \"\",\n  onChange,\n  lowerCaseMode = false,\n  phraseBank = [],\n  validator = () => []\n}: {\n  initialText?: string,\n  validator?: string => Array<string>,\n  onChange: string => any,\n  phraseBank?: Array<string>,\n  lowerCaseMode?: boolean\n}) {\n  const [inputValue, changeInputValue] = useState()\n  const [value, changeValue] = useState(\n    initialText\n      ? [{ value: initialText, label: initialText, color: green[500] }]\n      : []\n  )\n  const [validationErrors, changeValidationErrors] = useState([])\n\n  const handleChange = v => {\n    if (!v) v = []\n    changeValue(v)\n    const result = v\n      .map(l => l.label.trim())\n      .join(\" \")\n      .trim()\n    try {\n      changeValidationErrors(validator(result))\n    } catch (e) {\n      changeValidationErrors([\"Error: Validator had error: \" + e.toString()])\n    }\n    onChange(result)\n  }\n  const isInDictionary = text => {\n    if (lowerCaseMode) text = text.trim().toLowerCase()\n    const scRes = spellChecker.lookup(text)\n    if (scRes.found || phraseBank.includes(text)) return true\n    return false\n  }\n\n  const handleInputChange = v => changeInputValue(v)\n  const handleKeyDown = ({ key }) => {\n    if (!inputValue) return\n    if (key === \"Enter\" || key === \"Tab\") {\n      changeValue([\n        ...(value || []),\n        createOption(inputValue.trim(), yellow[700])\n      ])\n      changeInputValue(\"\")\n    } else if (key === \" \" && isInDictionary(inputValue.trim())) {\n      changeValue([\n        ...(value || []),\n        createOption(inputValue.trim(), green[500])\n      ])\n      changeInputValue(\"\")\n    } else if (\n      key === \" \" &&\n      isInDictionary(inputValue.split(\" \").slice(-1)[0])\n    ) {\n      changeValue([\n        ...(value || []),\n        createOption(\n          inputValue\n            .split(\" \")\n            .slice(0, -1)\n            .join(\" \")\n            .trim(),\n          yellow[700]\n        ),\n        createOption(inputValue.split(\" \").slice(-1)[0], green[700])\n      ])\n      changeInputValue(\"\")\n    }\n  }\n\n  const loadOptions = async text => {\n    let bestOption\n    if (lowerCaseMode) text = text.toLowerCase()\n    const scRes = spellChecker.lookup(text)\n    if (scRes.found || phraseBank.includes(text))\n      return [createOption(text, green[500])]\n\n    const possiblePhrases = phraseBank.filter(p => p.startsWith(text))\n    return [bestOption || createOption(text, yellow[700])]\n      .concat(\n        possiblePhrases\n          .filter(p => p !== text)\n          .map(p => createOption(p, green[500]))\n      )\n      .concat(\n        scRes.suggestions\n          .slice(0, 6)\n          .map(({ word }) => createOption(word, green[500]))\n      )\n  }\n\n  return (\n    <div style={{ fontSize: 18 }}>\n      <CreatableSelect\n        components={components}\n        inputValue={inputValue}\n        isClearable\n        isMulti\n        onChange={handleChange}\n        onInputChange={handleInputChange}\n        onKeyDown={handleKeyDown}\n        placeholder=\"Begin writing...\"\n        loadOptions={loadOptions}\n        value={value}\n        styles={colourStyles}\n      />\n      <div\n        style={{\n          fontSize: 14,\n          height: 100,\n          marginTop: 8,\n          borderRadius: 2,\n          padding: 8\n        }}\n      >\n        {validationErrors.map(v => (\n          <div\n            style={{\n              marginTop: 8,\n              color: v.toLowerCase().includes(\"error:\") ? red[800] : yellow[800]\n            }}\n          >\n            {v}\n          </div>\n        ))}\n      </div>\n    </div>\n  )\n}\n","// @flow\n\nimport React, { useState, useEffect } from \"react\"\nimport EditableDocument from \"../EditableDocument\"\nimport type { TranscriberProps } from \"../../types\"\n\nexport default ({\n  initialTranscriptionText,\n  onChange,\n  audio,\n  lowerCaseMode,\n  phraseBank: phraseBankParam,\n  validator\n}: TranscriberProps) => {\n  const [autoPlayStatus, changeAutoPlayStatus] = useState(\n    window.localStorage.NLP_ANNOTATOR_AUTOPLAY === \"true\"\n  )\n  // TODO create hook for usePhraseBank\n  const [phraseBank, changePhraseBank] = useState(undefined)\n  useEffect(() => {\n    async function loadPhraseBank() {\n      if (typeof phraseBankParam === \"string\") {\n        phraseBankParam = [phraseBankParam]\n      }\n      if (\n        Array.isArray(phraseBankParam) &&\n        phraseBankParam.every(\n          p =>\n            p.startsWith(\"http\") && (p.endsWith(\".txt\") || p.endsWith(\".csv\"))\n        )\n      ) {\n        let fullPhraseBank = []\n        for (const url of phraseBankParam) {\n          let found\n          const saveName = `NLP_ANNOTATOR_PHRASE_BANK_${url}`\n          if (window.localStorage[saveName]) {\n            try {\n              fullPhraseBank.push(...JSON.parse(window.localStorage[saveName]))\n              found = true\n            } catch (e) {}\n          }\n          if (!found) {\n            const urlPhrases = (await fetch(url).then(res => res.text())).split(\n              \"\\n\"\n            )\n            window.localStorage[saveName] = JSON.stringify(urlPhrases)\n            fullPhraseBank.push(...urlPhrases)\n          }\n        }\n        if (lowerCaseMode) {\n          fullPhraseBank = fullPhraseBank.map(a => a.toLowerCase())\n        }\n        changePhraseBank(fullPhraseBank)\n      } else if (Array.isArray(phraseBankParam)) {\n        changePhraseBank(phraseBankParam)\n      }\n    }\n    loadPhraseBank()\n    return () => {}\n  }, [phraseBankParam])\n\n  return (\n    <div>\n      <div style={{ textAlign: \"center\", padding: 10 }}>\n        <audio\n          autoPlay={autoPlayStatus}\n          loop\n          controlsList=\"nodownload\"\n          controls\n        >\n          <source src={audio} />\n        </audio>\n        <span style={{ fontSize: 12 }}>\n          Autoplay:{\" \"}\n          <input\n            checked={autoPlayStatus}\n            type=\"checkbox\"\n            onChange={() => {\n              window.localStorage.NLP_ANNOTATOR_AUTOPLAY = JSON.stringify(\n                window.localStorage.NLP_ANNOTATOR_AUTOPLAY !== \"true\"\n              )\n              changeAutoPlayStatus(\n                JSON.parse(window.localStorage.NLP_ANNOTATOR_AUTOPLAY)\n              )\n            }}\n          />\n        </span>\n      </div>\n      <div style={{ padding: 10 }}>\n        <EditableDocument\n          phraseBank={phraseBank}\n          validator={validator}\n          onChange={onChange}\n          initialText={initialTranscriptionText}\n        />\n      </div>\n    </div>\n  )\n}\n","// @flow\n\nimport React, { useMemo } from \"react\"\nimport Box from \"@material-ui/core/Box\"\nimport Typography from \"@material-ui/core/Typography\"\nimport Workspace from \"react-material-workspace-layout/Workspace\"\n\nexport default ({\n  children,\n  onNext,\n  onPrev,\n  currentSampleIndex = 0,\n  numberOfSamples = 1,\n  titleContent,\n  onClickHeaderItem\n}: any) => {\n  const headerItems = useMemo(\n    () =>\n      [\n        (currentSampleIndex > 0 || onPrev) && { name: \"Prev\", onClick: onPrev },\n        (numberOfSamples > currentSampleIndex + 1 || onNext) && {\n          name: \"Next\",\n          onClick: onNext\n        },\n        { name: \"Done\" }\n      ].filter(Boolean),\n    [currentSampleIndex, numberOfSamples]\n  )\n  return (\n    <Workspace\n      headerLeftSide={\n        titleContent === undefined ? (\n          <Box paddingLeft={2} fontWeight=\"bold\">\n            <Typography>\n              Sample {currentSampleIndex + 1} / {numberOfSamples}\n            </Typography>\n          </Box>\n        ) : (\n          titleContent\n        )\n      }\n      onClickHeaderItem={onClickHeaderItem}\n      headerItems={headerItems}\n      iconSidebarItems={[]}\n      rightSidebarItems={[]}\n    >\n      <Box padding={2}>{children}</Box>\n    </Workspace>\n  )\n}\n","// @flow\n\nimport React, { useState, useEffect, useMemo } from \"react\"\n\nimport type { NLPAnnotatorProps } from \"../../types\"\nimport SequenceAnnotator from \"../SequenceAnnotator\"\nimport DocumentLabeler from \"../DocumentLabeler\"\nimport Transcriber from \"../Transcriber\"\nimport colors from \"../../colors\"\nimport Container from \"../Container\"\nimport useEventCallback from \"use-event-callback\"\n\nconst defaultValidator = () => []\n\nexport default function NLPAnnotator(props: NLPAnnotatorProps) {\n  const validator = props.validator || defaultValidator\n  let [output, changeOutput] = useState(null)\n\n  if (output === null && props.type === \"transcribe\") {\n    output = props.initialTranscriptionText\n  }\n  if (output === null && props.type === \"label-sequence\") {\n    output = props.initialSequence || [{ text: props.document }]\n  }\n\n  useEffect(() => {\n    const eventFunc = e => {\n      if (e.key === \"Enter\") {\n        if (props.onFinish) props.onFinish(output)\n      }\n    }\n    window.addEventListener(\"keydown\", eventFunc)\n    return () => {\n      window.removeEventListener(\"keydown\", eventFunc)\n    }\n  }, [props.onFinish, output])\n\n  const onChange = (newOutput: any) => {\n    if (props.onChange) props.onChange(newOutput)\n    changeOutput(newOutput)\n  }\n\n  let labels = useMemo(() => {\n    let labels = props.labels || []\n    if (!labels.some(l => !l.color)) {\n      labels = labels.map((l, i) => ({\n        ...l,\n        color: colors[i % colors.length]\n      }))\n    }\n    return labels\n  }, [props.labels])\n\n  const isPassingValidation = !validator(output).some(msg =>\n    msg.toLowerCase().includes(\"error\")\n  )\n\n  console.log({ output })\n  const onFinish = useEventCallback(() => {\n    if (!isPassingValidation) return\n    console.log(\"onFinish\", output)\n    props.onFinish(output)\n  })\n\n  const onClickHeaderItem = useEventCallback(({ name }) => {\n    switch (name) {\n      case \"Done\":\n        onFinish(output)\n        return\n      default:\n        return\n    }\n  })\n\n  let annotator\n  switch (props.type) {\n    case \"label-sequence\":\n      annotator = (\n        <SequenceAnnotator {...props} labels={labels} onChange={onChange} />\n      )\n      break\n    case \"label-document\":\n      annotator = (\n        <DocumentLabeler {...props} labels={labels} onChange={onChange} />\n      )\n      break\n    case \"transcribe\":\n      annotator = <Transcriber {...props} onChange={onChange} />\n      break\n    default:\n      annotator = null\n  }\n\n  return (\n    <Container\n      titleContent={props.titleContent}\n      onNext={props.onNext}\n      onPrev={props.onPrev}\n      onClickHeaderItem={onClickHeaderItem}\n    >\n      <div>{annotator}</div>\n    </Container>\n  )\n}\n","// @flow\n\nimport React, { Component } from \"react\"\nimport Dialog from \"@material-ui/core/Dialog\"\nimport Button from \"@material-ui/core/Button\"\nimport DialogTitle from \"@material-ui/core/DialogTitle\"\nimport DialogContent from \"@material-ui/core/DialogContent\"\nimport DialogActions from \"@material-ui/core/DialogActions\"\n\nexport default class ErrorBoundaryDialog extends Component {\n  state = { hasError: false, err: \"\" }\n  componentDidCatch(err, info) {\n    this.setState({\n      hasError: true,\n      err: err.toString() + \"\\n\\n\" + info.componentStack\n    })\n  }\n  render() {\n    if (this.state.hasError) {\n      return (\n        <Dialog open={this.state.hasError} onClose={this.props.onClose}>\n          <DialogTitle>Error Loading Annotator</DialogTitle>\n          <DialogContent>\n            <pre>{this.state.err}</pre>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={this.props.onClose}>Close</Button>\n          </DialogActions>\n        </Dialog>\n      )\n    }\n    return this.props.children\n  }\n}\n","// @flow\nimport React, { useState } from \"react\"\nimport ReactDOM from \"react-dom\"\nimport Editor, { examples } from \"./Editor\"\nimport NLPAnnotator from \"../NLPAnnotator\"\nimport ErrorBoundaryDialog from \"./ErrorBoundaryDialog.js\"\nimport { parse as queryString } from \"query-string\"\nimport { Base64 } from \"js-base64\"\n\nfunction getInitialAnnotatorProps() {\n  const { load } = queryString(window.location.search) || {}\n\n  if (load) {\n    try {\n      return JSON.parse(Base64.decode(load))\n    } catch (e) {\n      console.error(\"Problem loading from load get parameter. Error parsing.\")\n    }\n  }\n\n  return examples[\"Custom\"]()\n}\n\nexport default () => {\n  const [annotatorOpen, changeAnnotatorOpen] = useState(false)\n  const [annotatorProps, changeAnnotatorProps] = useState(\n    getInitialAnnotatorProps()\n  )\n  const [lastOutput, changeLastOutput] = useState()\n\n  return (\n    <div>\n      {annotatorOpen ? (\n        <ErrorBoundaryDialog\n          onClose={() => {\n            changeAnnotatorOpen(false)\n          }}\n        >\n          <NLPAnnotator\n            {...(annotatorProps: any)}\n            onFinish={output => {\n              changeLastOutput(output)\n              changeAnnotatorOpen(false)\n            }}\n          />\n        </ErrorBoundaryDialog>\n      ) : (\n        <Editor\n          initialAnnotatorProps={annotatorProps}\n          lastOutput={lastOutput}\n          onOpenAnnotator={props => {\n            // window.history.pushState(\n            //   window.document.title,\n            //   window.document.title,\n            //   window.location.origin +\n            //     window.location.pathname +\n            //     \"?load=\" +\n            //     Base64.encode(JSON.stringify(props, null, \"  \"))\n            // )\n            changeAnnotatorProps(props)\n            changeAnnotatorOpen(true)\n          }}\n        />\n      )}\n    </div>\n  )\n}\n","// @flow\n\nimport React, { useEffect, useState } from \"react\"\nimport { makeStyles } from \"@material-ui/styles\"\nimport { parse as queryString } from \"query-string\"\nimport Button from \"@material-ui/core/Button\"\nimport axios from \"axios\"\nimport NLPAnnotator from \"../NLPAnnotator\"\nimport set from \"lodash/set\"\nimport cloneDeep from \"lodash/cloneDeep\"\nimport download from \"downloadjs\"\n\nconst useStyles = makeStyles({\n  header: {\n    display: \"flex\",\n    padding: 10,\n    backgroundColor: \"#f8f8f8\",\n    alignItems: \"center\",\n    borderBottom: \"1px solid #ccc\"\n  },\n  button: {\n    marginLeft: 10,\n    marginRight: 10\n  },\n  content: {\n    padding: 10\n  },\n  warning: {\n    fontSize: 11,\n    color: \"#f00\",\n    padding: 10,\n    textAlign: \"center\"\n  }\n})\n\nexport default () => {\n  const c = useStyles()\n  const [samples, changeSamples] = useState([])\n  const [sampleIndex, changeSampleIndex] = useState(0)\n  const [{ loadUrl, outputName = \"dataset\" }, changeMetaInfo] = useState({})\n  useEffect(() => {\n    async function loadData() {\n      const { load_url: loadUrl, output_name: outputName } =\n        queryString(window.location.search) || {}\n\n      changeMetaInfo({ loadUrl, outputName })\n\n      if (loadUrl) {\n        const { data } = await axios.get(loadUrl)\n        changeSamples(data)\n      }\n    }\n    loadData()\n    return () => {}\n  }, [])\n\n  return (\n    <div>\n      <div className={c.header}>\n        <div>\n          <div>\n            Sample #{sampleIndex + 1} / {samples.length}\n          </div>\n          <div>\n            <form method=\"GET\">\n              <input name=\"load_url\" defaultValue={loadUrl} />\n              <button>load</button>\n            </form>\n          </div>\n        </div>\n        <div style={{ flexGrow: 1 }} />\n        <Button\n          className={c.button}\n          onClick={() => {\n            // TODO\n            download(\n              JSON.stringify(samples),\n              outputName + \".json\",\n              \"application/json\"\n            )\n          }}\n        >\n          Download\n        </Button>\n        <Button\n          className={c.button}\n          onClick={() =>\n            changeSampleIndex(\n              (sampleIndex - 1 + samples.length) % samples.length\n            )\n          }\n        >\n          Prev Sample\n        </Button>\n        <Button\n          className={c.button}\n          variant=\"outlined\"\n          onClick={() => changeSampleIndex((sampleIndex + 1) % samples.length)}\n        >\n          Next Sample (enter)\n        </Button>\n      </div>\n      <div className={c.warning}>\n        This page will not save your progress on refresh.\n      </div>\n      {!loadUrl && <div className={c.warning}>load_url must be specified</div>}\n      {samples.length > 0 && (\n        <div className={c.content}>\n          <NLPAnnotator\n            key={sampleIndex}\n            {...samples[sampleIndex]}\n            onChange={answer => {\n              const { type, multiple } = samples[sampleIndex]\n              const prop =\n                type === \"label-document\" && multiple\n                  ? \"initialLabels\"\n                  : type === \"label-document\" && !multiple\n                  ? \"initialLabel\"\n                  : type === \"label-sequence\"\n                  ? \"initialSequence\"\n                  : type === \"transcribe\"\n                  ? \"initialTranscriptionText\"\n                  : null\n              console.log(set(cloneDeep(samples), [sampleIndex, prop], answer))\n              changeSamples(\n                set(cloneDeep(samples), [sampleIndex, prop], answer)\n              )\n            }}\n          />\n        </div>\n      )}\n    </div>\n  )\n}\n","// @flow\n\nimport React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport Theme from \"./components/Theme\"\nimport DemoSite from \"./components/DemoSite\"\nimport DatasetViewer from \"./components/DatasetViewer\"\n\nReactDOM.render(\n  <Theme>\n    {window.location.search.includes(\"load_url\") ? (\n      <DatasetViewer />\n    ) : (\n      <DemoSite />\n    )}\n  </Theme>,\n  document.getElementById(\"root\")\n)\n"],"sourceRoot":""}