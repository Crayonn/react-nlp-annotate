(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{229:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(9),i=n.n(l),o=n(582),c=n(230),u=n(573),s=(n(252),Object(o.a)({container:{fontFamily:'"Inter UI", sans-serif'}})),d=Object(c.a)({typography:{fontFamily:'"Inter UI", "Roboto", sans-serif'},overrides:{MuiButton:{root:{textTransform:"none"}}}}),m=function(e){var t=e.children,n=s();return r.a.createElement(u.a,{theme:d},r.a.createElement("div",{className:n.container},t))},f=n(7),p=n(574),b=n(142),g=n(585),h=n(584),v=n(577),y=n(579),O=n(580),E=n(103),j=n.n(E),S=Object(o.a)({editBar:{padding:10,borderBottom:"1px solid #ccc",backgroundColor:"#f8f8f8",display:"flex",alignItems:"center","& .button":{margin:5}},select:{width:240,fontSize:14},contentArea:{padding:10},specificationArea:{padding:10}}),w=function(){try{return JSON.parse(window.localStorage.getItem("nlpCustomInput")||"{}")}catch(e){return{}}},C={SimpleLabelSequence:function(){return{type:"label-sequence",document:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis pharetra ipsum tristique ligula venenatis placerat. Interdum et malesuada fames ac ante ipsum primis in faucibus. Fusce mollis velit nec tellus sollicitudin aliquam. In velit erat, iaculis id consectetur et, tincidunt sit amet mauris. Quisque ultricies, purus eleifend congue malesuada, ipsum erat molestie dolor, in pellentesque lacus purus vel nisl. Interdum et malesuada fames ac ante ipsum primis in faucibus. Nulla sed vestibulum magna. Quisque ut lorem imperdiet, aliquam velit nec, dictum felis.",labels:[{id:"noun",displayName:"Noun"},{id:"proper-noun",displayName:"Proper Noun"}]}},SimpleLabelDocument:function(){return{type:"label-document",document:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis pharetra ipsum tristique ligula venenatis placerat. Interdum et malesuada fames ac ante ipsum primis in faucibus. Fusce mollis velit nec tellus sollicitudin aliquam. In velit erat, iaculis id consectetur et, tincidunt sit amet mauris. Quisque ultricies, purus eleifend congue malesuada, ipsum erat molestie dolor, in pellentesque lacus purus vel nisl. Interdum et malesuada fames ac ante ipsum primis in faucibus. Nulla sed vestibulum magna. Quisque ut lorem imperdiet, aliquam velit nec, dictum felis.",labels:[{id:"latin",displayName:"Latin"},{id:"english",displayName:"English"},{id:"german",displayName:"German"}]}},Custom:function(){return w()}},k=function(e){var t=e.initialAnnotatorProps,n=e.onOpenAnnotator,l=e.lastOutput,i=S(),o=Object(a.useState)(),c=Object(f.a)(o,2),u=c[0],s=c[1],d=Object(a.useState)(window.localStorage.getItem("nlpCustomInput")?"Custom":"SimpleLabelSequence"),m=Object(f.a)(d,2),E=m[0],k=m[1],x=Object(a.useState)(l),N=Object(f.a)(x,2),A=N[0],L=N[1],T=Object(a.useState)(t?JSON.stringify(t,null,"  "):JSON.stringify(C[E](),null,"  ")),I=Object(f.a)(T,2),q=I[0],P=I[1];return r.a.createElement("div",null,r.a.createElement("div",{className:i.editBar},r.a.createElement("h3",null,"React NLP Annotate"),r.a.createElement("div",{style:{flexGrow:1}}),r.a.createElement("div",null,r.a.createElement("div",{style:{display:"inline-flex"}},r.a.createElement(b.a,{className:i.select,value:{label:E,value:E},options:Object.keys(C).map(function(e){return{label:e,value:e}}),onChange:function(e){k(e.value),P(JSON.stringify("Custom"===e.value?w():C[e.value](),null,"  "))}})),r.a.createElement(p.a,{className:"button",disabled:!l,onClick:function(){return L(!0)}},"View Output"),r.a.createElement(p.a,{className:"button",variant:"outlined",disabled:Boolean(u),onClick:function(){return n("Custom"===E?JSON.parse(q):C[E]())}},"Open Annotator"))),r.a.createElement("div",{className:i.contentArea,style:u?{border:"2px solid #f00"}:{border:"2px solid #fff"}},r.a.createElement("div",null,r.a.createElement(j.a,{value:q,language:"javascript",onChange:function(e){try{window.localStorage.setItem("nlpCustomInput",JSON.stringify(JSON.parse(e))),s(null)}catch(t){s(t.toString())}P(e)},width:"100%",height:"550px"}))),r.a.createElement("div",{className:i.specificationArea},r.a.createElement("h2",null,"React NLP Annotate Format"),r.a.createElement(g.a,{language:"javascript"},'\n// There are several types of annotators you can use...\n\nexport type LabelDocumentProps = {\n  type: "label-document",\n  labels: Array<Label>,\n  multipleLabels?: boolean,\n  initialLabels?: Array<string>,\n  document: string,\n  onChange: (Array<string> | string | null) => any\n}\n\nexport type SequenceAnnotatorProps = {\n  type: "label-sequence",\n  labels: Array<Label>,\n  initialSequence?: Array<SequenceItem>,\n  document: string,\n  onChange: (sequence: Array<SequenceItem>) => any\n}\n\nexport type TranscriberProps = {\n  type: "transcribe",\n  audio: string,\n  phraseBank?: Array<string>,\n  validator?: string => Array<string>,\n  initialTranscriptionText?: string,\n  onChange: string => any\n}\n\nexport type NLPAnnotatorProps = {\n  ...\n    | $Exact<SequenceAnnotatorProps>\n    | $Exact<LabelDocumentProps>\n    | $Exact<TranscriberProps>,\n  onFinish?: string,\n  onChange?: string\n}\n')),r.a.createElement(h.a,{fullScreen:!0,open:A},r.a.createElement(v.a,null,"React NLP Annotate Output"),r.a.createElement(y.a,{style:{minWidth:400}},r.a.createElement(j.a,{value:JSON.stringify(l,null,"  "),language:"javascript",width:"100%",height:"550px"})),r.a.createElement(O.a,null,r.a.createElement(p.a,{onClick:function(){return L(!1)}},"Close"))))},x=n(22),N=n(77),A=function(e){var t,n=/[a-zA-Z\xc0-\xff]+/g,a=[0];do{(t=n.exec(e))&&(a.push(t.index),a.push(t.index+t[0].length))}while(t);return(a=a.concat([e.length])).filter(function(e,t){return a[t]!==a[t+1]}).map(function(t,n){return{text:e.slice(a[n],a[n+1])}}).filter(function(e){return e.text.length>0})},L=n(587);Object(o.a)({});function T(e){var t=e.sequence,n=e.onHighlightedChanged,l=void 0===n?function(){return null}:n,i=e.onSequenceChange,o=void 0===i?function(){return null}:i,c=e.nothingHighlighted,u=void 0!==c&&c,s=e.colorLabelMap,d=void 0===s?{}:s,m=Object(a.useState)(),p=Object(f.a)(m,2),b=p[0],g=p[1],h=Object(a.useState)([null,null]),v=Object(f.a)(h,2),y=Object(f.a)(v[0],2),O=y[0],E=y[1],j=v[1],S=function(e){var t=Object(f.a)(e,2),n=t[0],a=t[1];j([n,a]);for(var r=[],i=Math.min(n,a);i<=Math.max(n,a);i++)r.push(i);l(r)},w=[];if(!u&&null!==O&&null!==E)for(var C=Math.min(O,E);C<=Math.max(O,E);C++)w.push(C);return r.a.createElement("div",{onMouseDown:function(){return g(!0)},onMouseUp:function(){return g(!1)}},t.map(function(e,n){return r.a.createElement("span",Object(N.a)({key:n,onMouseDown:function(){e.label||S([n,n])},onMouseMove:function(){e.label||b&&n!==E&&S([null===O?n:O,n])},style:e.label?{display:"inline-flex",backgroundColor:e.color||d[e.label]||"#333",color:"#fff",padding:4,margin:4,paddingLeft:10,paddingRight:10,borderRadius:4,userSelect:"none"}:{display:"inline-flex",backgroundColor:" "!==e.text&&w.includes(n)?"#ccc":"inherit",color:"#333",marginTop:4,marginBottom:4,paddingTop:4,paddingBottom:4,paddingLeft:2,paddingRight:2,userSelect:"none"}},"key",n),e.label?r.a.createElement(L.a,{title:e.label,placement:"bottom"},r.a.createElement("div",null,e.text)):r.a.createElement("div",null,e.text),e.label&&r.a.createElement("div",{onClick:function(){o(t.flatMap(function(t){return t!==e?t:A(t.text)}).filter(function(e){return e.text.length>0}))},style:{display:"inline-flex",cursor:"pointer",alignSelf:"center",fontSize:11,width:18,height:18,alignItems:"center",justifyContent:"center",marginLeft:4,borderRadius:9,color:"#fff",backgroundColor:"rgba(0,0,0,0.2)"}},r.a.createElement("span",null,"\u2716")))}))}var I=n(148),q=n.n(I),P=n(147),R=n.n(P),M=n(581),B=Object(M.a)({label:{display:"inline-flex",cursor:"pointer",padding:8,paddingLeft:12,paddingRight:12,margin:4,borderRadius:4,fontSize:18,color:"#fff",alignItems:"center","&:hover":{opacity:.6},"&.small":{fontSize:12,fontWeight:"bold"}},deleteableIcon:{display:"inline-flex",cursor:"pointer",alignSelf:"center",fontSize:11,width:18,height:18,alignItems:"center",justifyContent:"center",marginLeft:4,borderRadius:9,color:"#fff",backgroundColor:"rgba(0,0,0,0.2)"},hotkeyText:{paddingLeft:4},tooltip:{whiteSpace:"pre-wrap"}}),_=function(e){e.parent;var t=e.color,n=e.displayName,l=e.description,i=e.id,o=e.small,c=e.hasChildren,u=e.hotkey,s=e.deletable,d=B(),m=Object(a.useMemo)(function(){return{tooltip:d.tooltip}},[d]),f=r.a.createElement("div",{onClick:function(){return e.onClick(i)},className:R()(d.label,o&&"small"),style:{backgroundColor:t}},c&&r.a.createElement(q.a,{style:{width:o?12:20,height:o?12:20,marginRight:o?3:6}}),r.a.createElement("div",null,n||i),u&&r.a.createElement("div",{className:d.hotkeyText},"(",u,")"),s&&r.a.createElement("div",{className:d.deleteableIcon},r.a.createElement("span",null,"\u2716")));return l?r.a.createElement(L.a,{title:l,arrow:!0,classes:m},f):f},J=n(45),D=Object.keys(J).filter(function(e){return"common"!==e}).map(function(e){return J[e][700]});function F(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,i=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){o=!0,l=e},f:function(){try{i||null==n.return||n.return()}finally{if(o)throw l}}}}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var z=function(e){for(var t=e.labels,n=e.onSelectLabel,l=e.hotkeysEnabled,i=void 0!==l&&l,o=Object(a.useState)([]),c=Object(f.a)(o,2),u=c[0],s=c[1],d=u.length>0?u[u.length-1]:void 0,m={r:"root"},p={root:"r"},b=0;b<t.length;b++){var g,h=t[b],v=F((h.displayName||h.id).toLowerCase().split(""));try{for(v.s();!(g=v.n()).done;){var y=g.value;if(!m[y]){m[y]=h.id,p[h.id]=y;break}}}catch(O){v.e(O)}finally{v.f()}}return Object(a.useEffect)(function(){if(i){var e=function(e){if(m[e.key]){var a=m[e.key];t.some(function(e){return e.parent===a})?s(function e(t,n){if(!t)return[];var a=n.find(function(e){return(e.id||"root")===t})||{};return a?e(a.parent,n).concat([t]):[t]}(a,t)):"root"===a?s([]):n(a)}};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}},[s,n,i]),r.a.createElement("div",null,t.some(function(e){return e.parent})&&r.a.createElement("div",{style:{alignItems:"center",display:"flex",flexWrap:"wrap"}},r.a.createElement(_,{small:!0,color:u.length>0?"#333":"#ccc",displayName:"Root (r)",id:"",onClick:function(){return s([])}}),u.map(function(e){return t.find(function(t){return t.id===e})}).filter(Boolean).map(function(e){return Object(x.a)({},e,{hasChildren:t.some(function(t){return t.parent===e.id})})}).map(function(e,t){return r.a.createElement(_,Object.assign({small:!0},e,{hotkey:p[e.id],onClick:function(){s(u.slice(0,u.indexOf(e.id)+1))}}))})),r.a.createElement("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap"}},t.filter(function(e){return e.parent===d}).map(function(e){return Object(x.a)({},e,{hasChildren:t.some(function(t){return t.parent===e.id})})}).map(function(e,t){return r.a.createElement(_,Object.assign({key:e.id},e,{hotkey:i?p[e.id]:null,onClick:e.hasChildren?function(){s(u.concat([e.id]))}:n}))})))},H=function(e){for(var t=[],n=[e[0]],a=1;a<e.length;a++)n[0].label===e[a].label?n.push(e[a]):(t.push({label:n[0].label,text:n.reduce(function(e,t){return e+t.text},"")}),n=[e[a]]);return t.push({label:n[0].label,text:n.reduce(function(e,t){return e+t.text},"")}),t};function W(e){var t=Object(a.useState)([]),n=Object(f.a)(t,2),l=n[0],i=n[1],o=Object(a.useState)(function(){return e.initialSequence?e.initialSequence.flatMap(function(e){return e.label?[e]:A(e.text)}):A(e.document)}),c=Object(f.a)(o,2),u=c[0],s=c[1],d=Object(a.useMemo)(function(){return e.labels.reduce(function(e,t,n){return e[t.id]=D[n%D.length],e},{})},[e.labels]);return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(z,{hotkeysEnabled:e.hotkeysEnabled,labels:e.labels,onSelectLabel:function(t){for(var n=(e.labels.find(function(e){var n=e.id;return t===n})||{}).color,a="",r=[],o=0;o<u.length;o++){var c=u[o];!l.includes(o)||c.label?(a.length>0&&(r.push({text:a,color:n,label:t}),a=""),r.push(c)):a+=c.text}a.length>0&&r.push({text:a,color:n,label:t}),s(r),e.onChange(H(r)),i([])}})),r.a.createElement("div",{style:{borderTop:"1px solid #ccc",marginTop:8,paddingTop:5}},r.a.createElement(T,{colorLabelMap:d,nothingHighlighted:0===l.length,onHighlightedChanged:function(e){return i(e)},onSequenceChange:function(t){s(t),e.onChange(H(t))},sequence:u})))}function V(e){var t=Object(a.useState)(e.initialLabels||(e.initialLabel?[e.initialLabel]:[])),n=Object(f.a)(t,2),l=n[0],i=n[1],o=Object(a.useMemo)(function(){return A(e.document)},[e.document]);return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(z,{hotkeysEnabled:e.hotkeysEnabled,labels:e.labels,onSelectLabel:function(t){console.log({labelId:t}),e.multipleLabels?(i(l.concat([t])),e.onChange(l.concat([t]))):(e.onChange(t),i([t]))}})),r.a.createElement("div",{style:{borderTop:"1px solid #ccc",marginTop:8,paddingTop:5}},r.a.createElement("div",null,l.map(function(t){var n=e.labels.find(function(e){return e.id===t});if(n)return r.a.createElement(_,Object.assign({key:t},n,{small:!0,deletable:!0,onClick:function(t){var n=l.filter(function(e){return e!==t});i(n),e.multipleLabels?e.onChange(n):e.onChange(null)}}))})),r.a.createElement(T,{nothingHighlighted:!0,sequence:o})))}var $=n(28),G=n.n($),Q=n(39),Y=n(52),K=n(232),Z=n(149),X=n.n(Z),ee=n(150),te=n.n(ee),ne=n(86),ae=n.n(ne),re=n(84),le=n(59),ie=n(58),oe=new X.a(te.a),ce={},ue=function(e,t){return{label:e,value:e+Math.random().toString(),color:t}},se={control:function(e){return Object(x.a)({},e,{backgroundColor:"white"})},option:function(e,t){var n=t.data,a=t.isDisabled,r=t.isFocused,l=t.isSelected,i=ae()(n.color||re.a[700]);return Object(x.a)({},e,{backgroundColor:a?null:l?n.color:r?i.alpha(.1).css():i.alpha(.05).css(),color:a?"#ccc":l?ae.a.contrast(i,"white")>2?"white":"black":i.darken().darken().css(),cursor:a?"not-allowed":"default"})},multiValue:function(e,t){var n=t.data,a=ae()(n.color);return Object(x.a)({},e,{backgroundColor:a.alpha(.1).css()})},multiValueLabel:function(e,t){var n=t.data;return Object(x.a)({},e,{color:ae()(n.color).darken().darken().css()})},multiValueRemove:function(e,t){var n=t.data;return Object(x.a)({},e,{color:ae()(n.color).darken().darken().css(),":hover":{backgroundColor:n.color,color:"white"}})}};function de(e){var t=e.initialText,n=void 0===t?"":t,l=e.onChange,i=e.lowerCaseMode,o=void 0!==i&&i,c=e.phraseBank,u=void 0===c?[]:c,s=e.validator,d=void 0===s?function(){return[]}:s,m=Object(a.useState)(),p=Object(f.a)(m,2),b=p[0],g=p[1],h=Object(a.useState)(n?[{value:n,label:n,color:le.a[500]}]:[]),v=Object(f.a)(h,2),y=v[0],O=v[1],E=Object(a.useState)([]),j=Object(f.a)(E,2),S=j[0],w=j[1],C=function(e){return o&&(e=e.trim().toLowerCase()),!(!oe.lookup(e).found&&!u.includes(e))},k=function(){var e=Object(Y.a)(G.a.mark(function e(t){var n,a;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o&&(t=t.toLowerCase()),!(n=oe.lookup(t)).found&&!u.includes(t)){e.next=4;break}return e.abrupt("return",[ue(t,le.a[500])]);case 4:return a=u.filter(function(e){return e.startsWith(t)}),e.abrupt("return",[ue(t,re.a[700])].concat(a.filter(function(e){return e!==t}).map(function(e){return ue(e,le.a[500])})).concat(n.suggestions.slice(0,6).map(function(e){var t=e.word;return ue(t,le.a[500])})));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{style:{fontSize:18}},r.a.createElement(K.a,{components:ce,inputValue:b,isClearable:!0,isMulti:!0,onChange:function(e){e||(e=[]),O(e);var t=e.map(function(e){return e.label.trim()}).join(" ").trim();try{w(d(t))}catch(n){w(["Error: Validator had error: "+n.toString()])}l(t)},onInputChange:function(e){return g(e)},onKeyDown:function(e){var t=e.key;b&&("Enter"===t||"Tab"===t?(O([].concat(Object(Q.a)(y||[]),[ue(b.trim(),re.a[700])])),g("")):" "===t&&C(b.trim())?(O([].concat(Object(Q.a)(y||[]),[ue(b.trim(),le.a[500])])),g("")):" "===t&&C(b.split(" ").slice(-1)[0])&&(O([].concat(Object(Q.a)(y||[]),[ue(b.split(" ").slice(0,-1).join(" ").trim(),re.a[700]),ue(b.split(" ").slice(-1)[0],le.a[700])])),g("")))},placeholder:"Begin writing...",loadOptions:k,value:y,styles:se}),r.a.createElement("div",{style:{fontSize:14,height:100,marginTop:8,borderRadius:2,padding:8}},S.map(function(e){return r.a.createElement("div",{style:{marginTop:8,color:e.toLowerCase().includes("error:")?ie.a[800]:re.a[800]}},e)})))}function me(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fe(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,i=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){o=!0,l=e},f:function(){try{i||null==n.return||n.return()}finally{if(o)throw l}}}}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var pe=function(e){var t=e.initialTranscriptionText,n=e.onChange,l=e.audio,i=e.lowerCaseMode,o=e.phraseBank,c=e.validator,u=Object(a.useState)("true"===window.localStorage.NLP_ANNOTATOR_AUTOPLAY),s=Object(f.a)(u,2),d=s[0],m=s[1],p=Object(a.useState)(void 0),b=Object(f.a)(p,2),g=b[0],h=b[1];return Object(a.useEffect)(function(){function e(){return(e=Object(Y.a)(G.a.mark(function e(){var t,n,a,r,l,c,u,s,d;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"===typeof o&&(o=[o]),!Array.isArray(o)||!o.every(function(e){return e.startsWith("http")&&(e.endsWith(".txt")||e.endsWith(".csv"))})){e.next=31;break}t=[],n=me(o),e.prev=4,n.s();case 6:if((a=n.n()).done){e.next=19;break}if(r=a.value,l=void 0,c="NLP_ANNOTATOR_PHRASE_BANK_".concat(r),window.localStorage[c])try{(u=t).push.apply(u,Object(Q.a)(JSON.parse(window.localStorage[c]))),l=!0}catch(m){}if(l){e.next=17;break}return e.next=14,fetch(r).then(function(e){return e.text()});case 14:d=e.sent.split("\n"),window.localStorage[c]=JSON.stringify(d),(s=t).push.apply(s,Object(Q.a)(d));case 17:e.next=6;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(4),n.e(e.t0);case 24:return e.prev=24,n.f(),e.finish(24);case 27:i&&(t=t.map(function(e){return e.toLowerCase()})),h(t),e.next=32;break;case 31:Array.isArray(o)&&h(o);case 32:case"end":return e.stop()}},e,null,[[4,21,24,27]])}))).apply(this,arguments)}return function(){e.apply(this,arguments)}(),function(){}},[o]),r.a.createElement("div",null,r.a.createElement("div",{style:{textAlign:"center",padding:10}},r.a.createElement("audio",{autoPlay:d,loop:!0,controlsList:"nodownload",controls:!0},r.a.createElement("source",{src:l})),r.a.createElement("span",{style:{fontSize:12}},"Autoplay:"," ",r.a.createElement("input",{checked:d,type:"checkbox",onChange:function(){window.localStorage.NLP_ANNOTATOR_AUTOPLAY=JSON.stringify("true"!==window.localStorage.NLP_ANNOTATOR_AUTOPLAY),m(JSON.parse(window.localStorage.NLP_ANNOTATOR_AUTOPLAY))}}))),r.a.createElement("div",{style:{padding:10}},r.a.createElement(de,{phraseBank:g,validator:c,onChange:n,initialText:t})))},be=n(583),ge=n(578),he=n(161),ve=function(e){var t=e.children,n=e.onNext,l=e.onPrev,i=e.currentSampleIndex,o=void 0===i?0:i,c=e.numberOfSamples,u=void 0===c?1:c,s=e.titleContent,d=e.onClickHeaderItem,m=Object(a.useMemo)(function(){return[(o>0||l)&&{name:"Prev",onClick:l},(u>o+1||n)&&{name:"Next",onClick:n},{name:"Done"}].filter(Boolean)},[o,u]);return r.a.createElement(he.a,{headerLeftSide:void 0===s?r.a.createElement(be.a,{paddingLeft:2,fontWeight:"bold"},r.a.createElement(ge.a,null,"Sample ",o+1," / ",u)):s,onClickHeaderItem:d,headerItems:m,iconSidebarItems:[],rightSidebarItems:[]},r.a.createElement(be.a,{padding:2},t))},ye=n(106),Oe=function(){return[]};function Ee(e){var t=e.validator||Oe,n=Object(a.useState)(null),l=Object(f.a)(n,2),i=l[0],o=l[1];null===i&&"transcribe"===e.type&&(i=e.initialTranscriptionText),null===i&&"label-sequence"===e.type&&(i=e.initialSequence||[{text:e.document}]),Object(a.useEffect)(function(){var t=function(t){"Enter"===t.key&&e.onFinish&&e.onFinish(i)};return window.addEventListener("keydown",t),function(){window.removeEventListener("keydown",t)}},[e.onFinish,i]);var c=function(t){e.onChange&&e.onChange(t),o(t)},u=Object(a.useMemo)(function(){var t=e.labels||[];return t.some(function(e){return!e.color})||(t=t.map(function(e,t){return Object(x.a)({},e,{color:D[t%D.length]})})),t},[e.labels]),s=!t(i).some(function(e){return e.toLowerCase().includes("error")});console.log({output:i});var d,m=Object(ye.a)(function(){s&&(console.log("onFinish",i),e.onFinish(i))}),p=Object(ye.a)(function(e){switch(e.name){case"Done":return void m(i);default:return}});switch(e.type){case"label-sequence":d=r.a.createElement(W,Object.assign({},e,{labels:u,onChange:c}));break;case"label-document":d=r.a.createElement(V,Object.assign({},e,{labels:u,onChange:c}));break;case"transcribe":d=r.a.createElement(pe,Object.assign({},e,{onChange:c}));break;default:d=null}return r.a.createElement(ve,{titleContent:e.titleContent,onNext:e.onNext,onPrev:e.onPrev,onClickHeaderItem:p},r.a.createElement("div",null,d))}var je=n(156),Se=n(157),we=n(234),Ce=n(231),ke=n(107);function xe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(ke.a)(e);if(t){var r=Object(ke.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(Ce.a)(this,n)}}var Ne=function(e){Object(we.a)(n,e);var t=xe(n);function n(){var e;Object(je.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={hasError:!1,err:""},e}return Object(Se.a)(n,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0,err:e.toString()+"\n\n"+t.componentStack})}},{key:"render",value:function(){return this.state.hasError?r.a.createElement(h.a,{open:this.state.hasError,onClose:this.props.onClose},r.a.createElement(v.a,null,"Error Loading Annotator"),r.a.createElement(y.a,null,r.a.createElement("pre",null,this.state.err)),r.a.createElement(O.a,null,r.a.createElement(p.a,{onClick:this.props.onClose},"Close"))):this.props.children}}]),n}(a.Component),Ae=n(78),Le=n(158);var Te=function(){var e=Object(a.useState)(!1),t=Object(f.a)(e,2),n=t[0],l=t[1],i=Object(a.useState)(function(){var e=(Object(Ae.parse)(window.location.search)||{}).load;if(e)try{return JSON.parse(Le.Base64.decode(e))}catch(t){console.error("Problem loading from load get parameter. Error parsing.")}return C.Custom()}()),o=Object(f.a)(i,2),c=o[0],u=o[1],s=Object(a.useState)(),d=Object(f.a)(s,2),m=d[0],p=d[1];return r.a.createElement("div",null,n?r.a.createElement(Ne,{onClose:function(){l(!1)}},r.a.createElement(Ee,Object.assign({},c,{onFinish:function(e){p(e),l(!1)}}))):r.a.createElement(k,{initialAnnotatorProps:c,lastOutput:m,onOpenAnnotator:function(e){u(e),l(!0)}}))},Ie=n(159),qe=n.n(Ie),Pe=n(108),Re=n.n(Pe),Me=n(109),Be=n.n(Me),_e=n(160),Je=n.n(_e),De=Object(o.a)({header:{display:"flex",padding:10,backgroundColor:"#f8f8f8",alignItems:"center",borderBottom:"1px solid #ccc"},button:{marginLeft:10,marginRight:10},content:{padding:10},warning:{fontSize:11,color:"#f00",padding:10,textAlign:"center"}}),Fe=function(){var e=De(),t=Object(a.useState)([]),n=Object(f.a)(t,2),l=n[0],i=n[1],o=Object(a.useState)(0),c=Object(f.a)(o,2),u=c[0],s=c[1],d=Object(a.useState)({}),m=Object(f.a)(d,2),b=m[0],g=b.loadUrl,h=b.outputName,v=void 0===h?"dataset":h,y=m[1];return Object(a.useEffect)(function(){function e(){return(e=Object(Y.a)(G.a.mark(function e(){var t,n,a,r,l;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Object(Ae.parse)(window.location.search)||{},n=t.load_url,a=t.output_name,y({loadUrl:n,outputName:a}),!n){e.next=8;break}return e.next=5,qe.a.get(n);case 5:r=e.sent,l=r.data,i(l);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}return function(){e.apply(this,arguments)}(),function(){}},[]),r.a.createElement("div",null,r.a.createElement("div",{className:e.header},r.a.createElement("div",null,r.a.createElement("div",null,"Sample #",u+1," / ",l.length),r.a.createElement("div",null,r.a.createElement("form",{method:"GET"},r.a.createElement("input",{name:"load_url",defaultValue:g}),r.a.createElement("button",null,"load")))),r.a.createElement("div",{style:{flexGrow:1}}),r.a.createElement(p.a,{className:e.button,onClick:function(){Je()(JSON.stringify(l),v+".json","application/json")}},"Download"),r.a.createElement(p.a,{className:e.button,onClick:function(){return s((u-1+l.length)%l.length)}},"Prev Sample"),r.a.createElement(p.a,{className:e.button,variant:"outlined",onClick:function(){return s((u+1)%l.length)}},"Next Sample (enter)")),r.a.createElement("div",{className:e.warning},"This page will not save your progress on refresh."),!g&&r.a.createElement("div",{className:e.warning},"load_url must be specified"),l.length>0&&r.a.createElement("div",{className:e.content},r.a.createElement(Ee,Object.assign({key:u},l[u],{onChange:function(e){var t=l[u],n=t.type,a=t.multiple,r="label-document"===n&&a?"initialLabels":"label-document"!==n||a?"label-sequence"===n?"initialSequence":"transcribe"===n?"initialTranscriptionText":null:"initialLabel";console.log(Re()(Be()(l),[u,r],e)),i(Re()(Be()(l),[u,r],e))}}))))};i.a.render(r.a.createElement(m,null,window.location.search.includes("load_url")?r.a.createElement(Fe,null):r.a.createElement(Te,null)),document.getElementById("root"))},247:function(e,t,n){e.exports=n(229)},252:function(e,t,n){}},[[247,2,1]]]);
//# sourceMappingURL=main.dc4ea972.chunk.js.map